(function(){$(document).on("page:load#web-coupons-confirmeds-show",function(){if(cc.cannotMyself&&swal({title:"\u4e0d\u80fd\u81ea\u5df1\u9080\u8bf7\u54e6",text:"\u81ea\u5df1\u9080\u8bf7\u81ea\u5df1\u514d\u8d39\u62ff\u4ee3\u91d1\u5238\uff0c\u673a\u667a\u5982\u4f60\ud83d\ude1c",type:"warning",showCancelButton:!1,confirmButtonText:"\u77e5\u9053\u4e86",closeOnConfirm:!1},function(){return window.location.href="/web/dashboard"}),cc.dued&&swal({title:"\u9080\u8bf7\u5238\u5df2\u7ecf\u8fc7\u671f\u5566\uff01",text:"\u73b0\u5728\u53c2\u52a0\uff0c\u4ecd\u6709\u673a\u4f1a\u9886\u53d640\u5143\u4ee3\u91d1\u5238\u54e6\ud83d\ude1c",type:"warning",showCancelButton:!1,confirmButtonText:"\u597d\u7684",closeOnConfirm:!1},function(){return window.location.href="/dm?sid="+cc.sid}),cc.cannotStudent)return swal({title:"\u53ea\u6709\u65b0\u7528\u6237\u53ef\u4ee5\u8ba4\u9886\u514d\u8d39\u9080\u8bf7\u5238\u54e6\uff01",text:"\u897f\u74dc\u5b66\u5458\u62ff\u514d\u8d39\u4ee3\u91d1\u5238\uff0c\u673a\u667a\u5982\u4f60\ud83d\ude1c",type:"warning",showCancelButton:!1,confirmButtonText:"\u597d\u7684",closeOnConfirm:!1},function(){return window.location.href="/web/dashboard"})})}).call(this),function(){$(document).on("page:load#web-coupons-show",function(){return $(".red-package-bg").on("click",function(){return $(".share-title").fadeIn(300)}),cc.notMyself&&swal({title:"\u8fd9\u4e0d\u662f\u4f60\u7684\u9080\u8bf7\u5238\u54e6",text:"\u4f60\u4e0d\u80fd\u6253\u5f00\u522b\u4eba\u7684\u9080\u8bf7\u5238\u54e6",type:"warning",showCancelButton:!1,confirmButtonText:"\u77e5\u9053\u4e86",closeOnConfirm:!1},function(){return window.location.href="/web/dashboard"}),"undefined"!=typeof regular&&null!==regular?regular.ready(function(){var e;return e="https://s.jita.im/web/coupons/"+cc.coupon+"/enveloped",regular.onMenuShareTimeline({title:cc.dmTitle,desc:cc.dmDesc,link:e,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga?ga("send","event","coupon","\u9080\u8bf7"):void 0}}),regular.onMenuShareAppMessage({title:cc.dmTitle,desc:cc.dmDesc,link:e,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga?ga("send","event","coupon","\u9080\u8bf7"):void 0}})}):void 0})}.call(this),function(){var e,t;e="web-courses-lectures-finished",$(document).on("page:load#"+e,function(){return $("video").one("play",function(){return t("PLAYED")}),"undefined"!=typeof regular&&null!==regular?regular.ready(function(){var e;return e=cc.getCurrentUrlWithTracker(),regular.onMenuShareTimeline({title:cc.dmTitle,link:e,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga&&ga("send","event","\u56de\u987e\u77e5\u8bc6\u70b9","\u5206\u4eab"),t("SHARE_TIMELINE")}}),regular.onMenuShareAppMessage({title:cc.dmTitle,link:e,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga&&ga("send","event","\u56de\u987e\u77e5\u8bc6\u70b9","\u5206\u4eab"),t("SHARE_MESSAGE")}})}):void 0}),t=function(e){return $.post("/lecture_knowledge_logs",{lecture_knowledge_log:{lecture_id:cc.lecture._id.$oid,action:e}})}}.call(this),function(){$.urlParam=function(e){var t;return t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href),t?t[1]||0:null},$(document).on("page:load#web-general-dm4",function(){var e,t;return cc.dmTrackId=$.cookie("dm-track-id"),cc.tick=0,cc.isPlaying=!1,top.lastPoz=0,top.lastPozCount=0,null===cc.dmTrackId&&(cc.dmTrackId=Math.floor(1e16*Math.random()).toString(),$.cookie("dm-track-id",cc.dmTrackId)),$(".show-fixed").fadeOut(),$(window).scroll(function(){var e;return e=$(window).scrollTop(),e<50||e>$("body").height()-1.5*$(window).height()?$(".show-fixed").fadeOut():$(".show-fixed").fadeIn()}),t=function(e,t){var n;return null==t&&(t=""),n=Math.round((new Date).getTime()/1e3),$.ajax({url:"/dm/log",method:"put",data:{who:cc.dmTrackId,c:$.urlParam("c"),tick:cc.tick,act:e,at:n,d:t}})},e=function(){var e,t;return t=$(document).scrollTop(),e=$(document).height()-window.innerHeight,t/e},setInterval(function(){var n;return cc.tick++,n=e(),cc.isPlaying?t("PLAYING",""+top.player.currentTime.toString()):(top.lastPoz===n?top.lastPozCount++:(top.lastPoz=n,top.lastPozCount=0),top.lastPozCount<60?t("T",""+n):void 0)},1e3),top.player=new MediaElement("mainPlayer",{enablePluginDebug:!0,success:function(){},playing:function(){return t("PLAY")}}),top.player.addEventListener("seeked",function(){return top.player.currentTime,t("SEEKED",top.player.currentTime.toString())}),top.player.addEventListener("play",function(){return cc.isPlaying=!0,top.player.currentTime,t("PLAY",""+top.player.currentTime.toString())}),top.player.addEventListener("pause",function(){return cc.isPlaying=!1,t("PAUSE",""+top.player.currentTime.toString())}),top.player.addEventListener("ended",function(){return t("ENDED",""+top.player.currentTime.toString()),cc.isPlaying=!1}),$(".join a").on("click touch",function(n){var i;return swal({title:"\u8bf7\u7a0d\u5019",text:"",imageUrl:"/assets/web/loading.svg",showConfirmButton:!1}),n.preventDefault(),i=$(".join a").data("link"),t("B",e()),setTimeout(function(){return window.location.href=i},1e3)}),"undefined"!=typeof regular&&null!==regular?regular.ready(function(){var e;return e=cc.getCurrentUrlWithTracker(),regular.onMenuShareTimeline({title:cc.dmTitle,desc:cc.dmDesc,link:e,imgUrl:cc.moment_icon,success:function(){return t("EVT","ST"),"function"==typeof ga?ga("send","event","DM\u5355","\u5206\u4eab"):void 0}}),regular.onMenuShareAppMessage({title:cc.dmTitle,desc:cc.dmDesc,link:e,imgUrl:cc.moment_icon,success:function(){return t("EVT","SF"),"function"==typeof ga?ga("send","event","DM\u5355","\u5206\u4eab"):void 0}})}):void 0})}.call(this),function(){$(document).on("page:load#web-general-dm2",function(){return"undefined"!=typeof regular&&null!==regular?regular.ready(function(){var e;return e=cc.getCurrentUrlWithTracker(),regular.onMenuShareTimeline({title:cc.dmTitle,desc:cc.dmDesc,link:e,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga?ga("send","event","DM\u5355","\u5206\u4eab"):void 0}}),regular.onMenuShareAppMessage({title:cc.dmTitle,desc:cc.dmDesc,link:e,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga?ga("send","event","DM\u5355","\u5206\u4eab"):void 0}})}):void 0})}.call(this),function(){$(document).on("page:load#web-general-faq",function(){return $(".icon-back").hide(),top.lastTop=0,$(".question-item h2.question").on("click",function(e){var t;return $(".icon-back").fadeIn(),t=$(e.target).data("id"),top.lastTop=$(window).scrollTop(),$("html, body").animate({scrollTop:$("#qna-"+t).offset().top-15,500:500})}),$(".icon-back").on("click",function(){return $("html, body").animate({scrollTop:top.lastTop,500:500}),$(".icon-back").fadeOut()}),$(window).on("scroll",function(){if($(window).scrollTop()>$("#qna-0").offset().top-$(window).height())return $(".icon-back").fadeIn()})})}.call(this),function(){$(document).on("page:load#web-general-lec_report",function(){var e,t,n,i;return n=$("#progress").attr("p"),t=Number(n)/18,$("#bar").width(100*t+"%"),e=$("#cs_student").attr("name"),i=new RegExp("\n ","g"),e=e.replace(i,""),"undefined"!=typeof regular&&null!==regular?regular.ready(function(){var t;return t="https://s.jita.im/dm?c=report",regular.onMenuShareTimeline({title:"\u6211\u5bb6"+e+"\u5728\u53c2\u52a0\u300e\u897f\u74dc\u521b\u5ba2\u300f\u8da3\u5473\u7f16\u7a0b\u8bfe\uff0c\u5b66\u7f16\u7a0b\uff0c\u8fd8\u80fd\u6d3b\u7528\u8bed\u6570\u5916",desc:"\u65b0\u4e00\u671f\u6b63\u5728\u62a5\u540d\u4e2d...",link:t,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga?ga("send","event","\u62a5\u544a\u9875\u9762","\u5206\u4eab"):void 0}}),regular.onMenuShareAppMessage({title:"\u6211\u5bb6"+e+"\u5728\u53c2\u52a0\u300e\u897f\u74dc\u521b\u5ba2\u300f\u8da3\u5473\u7f16\u7a0b\u8bfe\uff0c\u5b66\u7f16\u7a0b\uff0c\u8fd8\u80fd\u6d3b\u7528\u8bed\u6570\u5916",desc:"\u65b0\u4e00\u671f\u6b63\u5728\u62a5\u540d\u4e2d...",link:t,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga?ga("send","event","\u62a5\u544a\u9875\u9762","\u5206\u4eab"):void 0}})}):void 0})}.call(this),function(){}.call(this),function(){var e;$(document).on("ready page:load",function(){return $.ajaxSetup({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")}}),e(),$(document).trigger("page:load#"+cc.pageId,[$("#"+cc.pageId)]),$(".folder-title").on("click touch",function(e){var t;if(t=$(e.target),t.hasClass(".folder-block")||(t=t.parents(".folder-block")),!t.hasClass("disabled"))return t.hasClass("closed")?t.removeClass("closed"):t.addClass("closed")})}),$(document).on("page:change",function(){return window.gon||$.globalEval($("#gon").html()),$.extend(cc,window.gon),window.gon=null,$(document).trigger("page:change#"+cc.pageId)}),$(document).on("page:before-unload",function(){return $(document).trigger("page:before-unload#"+cc.pageId)}),$(document).on("page:expire",function(){return $(document).trigger("page:expire#"+cc.pageId)}),this.cc={getCurrentUrlWithTracker:function(e){var t,n,i,o;return null==e&&(e=window.location),t=0,o=e.search,n=o&&o.length?(i=/^(.+?level=)(\d+)(.*?)$/.exec(o),i&&4===i.length?(t=parseInt(i[2])+1,i[1]+t.toString()+i[3]):o+"&level=1"):"?level=1",e.origin+e.pathname+n+e.hash}},e=function(){return"undefined"!=typeof regular&&null!==regular&&regular.config({debug:!1,appId:cc.regular_appid,timestamp:cc.regular_timestamp,nonceStr:cc.regular_noncestr,signature:cc.regular_signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","hideMenuItems","showMenuItems","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","scanQRCode"]}),"undefined"!=typeof regular&&null!==regular?regular.ready(function(){var e;return e=cc.getCurrentUrlWithTracker(),regular.showMenuItems({menuList:["menuItem:profile","menuItem:addContact"]}),regular.hideMenuItems({menuList:["menuItem:share:weiboApp","menuItem:share:facebook","menuItem:share:QZone","menuItem:share:email","menuItem:openWithQQBrowser","menuItem:readMode","menuItem:openWithSafari"]}),regular.onMenuShareTimeline({title:"\u6211\u4eec\u6b63\u5728\u53c2\u52a0\u300e\u897f\u74dc\u521b\u5ba2\u300f\u7f16\u7a0b\u8425\uff0c\u5b66\u7f16\u7a0b\uff0c\u8fd8\u80fd\u6d3b\u7528\u8bed\u6570\u5916\uff0c\u5feb\u6765\u8bd5\u8bd5\u5427",link:e,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga?ga("send","event","\u666e\u901a\u9875\u9762","\u5206\u4eab"):void 0}}),regular.onMenuShareAppMessage({title:"\u6211\u4eec\u6b63\u5728\u53c2\u52a0\u300e\u897f\u74dc\u521b\u5ba2\u300f\u7f16\u7a0b\u8425\uff0c\u5b66\u7f16\u7a0b\uff0c\u8fd8\u80fd\u6d3b\u7528\u8bed\u6570\u5916\uff0c\u5feb\u6765\u8bd5\u8bd5\u5427",link:e,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga?ga("send","event","\u666e\u901a\u9875\u9762","\u5206\u4eab"):void 0}})}):void 0}}.call(this),function(){$(document).on("page:load#web-homework_share-show page:load#admin-homework_share-show",function(e){var t,n,i,o,r;return startConfettis("canvEffect"),i=$("#homework_student").attr("name"),r=new RegExp("\n ","g"),i=i.replace(r,""),$("#mainPlayer").on("error",function(){var e,t;if(t=$("#mainPlayer").attr("src"),e=t.replace("output.xiguacity","m.xiguacity"),t!==e)return $("#mainPlayer").attr("src",e)}),!0===cc.ticket_now&&$(".invite-ticket").fadeIn(300),t=$("#subtitle").attr("count"),n=$(".instruction").attr("message"),""===n?"\u7684\u4f5c\u54c1\u54e6\uff01":"\u5199\u7684\u7b2c"+n+"\u4e2a\u6e38\u620f\u54e6\uff01",$("a.delete").on("click",function(){var e;return e=$("#pc-homework-container").data("id"),swal({title:"\u5220\u9664\u8fd9\u4e2a\u5206\u4eab",text:"\u771f\u7684\u8981\u5220\u9664\u8fd9\u4e2a\u5206\u4eab\u4e48\uff0c\u5220\u9664\u540e\u53ef\u5c31\u627e\u4e0d\u56de\u6765\u5566",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"\u5220\u9664\uff01",cancelButtonText:"\u7b97\u4e86\u5427",closeOnConfirm:!1,closeOnCancel:!1},function(t){return t?$.ajax({url:"/web/delete_homework",method:"put",data:{hwid:e},error:function(){return swal({title:"Oops",text:"\u5220\u9664\u5931\u8d25\u5566",type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:2e3})},success:function(){return swal({title:"\u5220\u9664\u6210\u529f",text:"\u6210\u529f\u5220\u9664\u4e86\u8fd9\u4e2a\u4f5c\u54c1\uff0c\u5b83\u6d88\u5931\u5728\u4e86\u5927\u6d77\u4e2d",type:"success",allowOutsideClick:!0,showConfirmButton:!1,timer:2e3}),window.location.href="/pc/my_space"}}):swal.close()})}),$("#learn-more").on("click",function(){var t;return $(".lecture-info-container").fadeIn(350),e.preventDefault(),$("html, body").animate({scrollTop:($("#current_lec").offset()||$(".content-container:nth-child(1)").offset()).top},1e3),t=Math.round((new Date).getTime()/1e3),$.ajax({url:"/olog",method:"put",data:{sid:$("#pc-homework-container").data("id"),act:"HOMEWORK_LEARNMORE",at:t,d:null,who:null}})}),$("input#comment-now").on("keyup",function(e){var t,n;if(13===e.keyCode)return console.info("msg:",$("input#comment-now").val()),t=$("input#comment-now").val(),n=$("#pc-homework-container").data("id"),$.ajax({url:"/teacher_comment",method:"put",data:{homework:n,comment:t},success:function(e){return console.log(e),swal({title:"comment\u6210\u529f\uff01",text:"comment\u6210\u529f\uff01",type:"success",confirmButtonText:"OK",closeOnConfirm:!0}),$("#"+n,window.parent.document).remove(),location.reload()}})}),$(document).on("click",".comment-temp",function(e){var t,n;return t=$(e.target).text(),console.log(t),n=$("#pc-homework-container").data("id"),swal({title:"\u8f93\u5165\u8bc4\u4ef7",text:"\u663e\u793a\u6a21\u7248",type:"input",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,inputValue:t},function(e){return!1!==e&&(""===e?(swal.showInputError("\u8f93\u5165\u70b9\u4ec0\u4e48\u5457"),!1):$.ajax({url:"/teacher_comment",method:"put",data:{homework:n,comment:e},success:function(e){return console.log(e),swal({title:"comment\u6210\u529f\uff01",text:"comment\u6210\u529f\uff01",type:"success",confirmButtonText:"OK",closeOnConfirm:!0}),$("#"+n,window.parent.document).remove(),location.reload()}}))})}),$("#comment").on("touched click",function(){var e;return e=$("#pc-homework-container").data("id"),$.ajax({method:"get",data:{homework:e},url:"/fetch_comment_temp",success:function(e){var t,n,i,o,r,a;for(console.log(e),t="",n=0,a=e.temp,o=0,r=a.length;o<r;o++)i=a[o],t=t+"<a class = 'comment-temp'>"+i+"</a><br>",n++;return swal({title:"\u9009\u62e9\u6a21\u7248",text:t,showCancelButton:!0,cancelButtonText:"\u53d6\u6d88",closeOnConfirm:!0,html:!0})}})}),$("#review").on("touched click",function(){var e;return e=$("#pc-homework-container").data("id"),$.ajax({url:"/mark_review",method:"put",data:{homework:e},success:function(t){return console.log(t),swal({title:"mark review \u6210\u529f\uff01",text:"mark review \u6210\u529f\uff01",type:"success",confirmButtonText:"OK",closeOnConfirm:!0}),location.reload(),$("#"+e,window.parent.document).remove()}})}),$("#btn-like").on("touched click",function(){var e,t;if(!$("a#btn-finished").attr("disabled"))return t=Math.round((new Date).getTime()/1e3),e=$("#pc-homework-container").data("id"),$.ajax({url:"/like",method:"put",data:{sid:e,act:"LIKE",at:t,d:null},success:function(e){return console.log(e),$("#btn-like").addClass("disabled"),$("#like").text(e.count),$("#like-img").attr("src","/assets/web/liked-f4c1bb0bfd8a22ac66878b1d4242d04b3b33fa5e1ed48f345b7d4ed368f33f05.png")}})}),$("a.mark-done").on("click",function(e){var t,n;return t=$(e.target).data("lsid"),n=$("#pc-homework-container").data("id"),$.ajax(console.log(t),{url:"/admin/course_statuses/update_with_notif",method:"put",data:{id:t,status:2},error:function(e,t){return swal({title:"\u9519\u8bef",text:""+t,type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:3e3})},success:function(){return swal({title:"\u6210\u529f!",type:"success",allowOutsideClick:!1,showConfirmButton:!0}),$.ajax({url:"/mark_review",method:"put",data:{homework:n},success:function(e){return console.log(e),swal({title:"mark review \u6210\u529f\uff01",text:"mark review \u6210\u529f\uff01",type:"success",confirmButtonText:"OK",closeOnConfirm:!0}),location.reload()}})}})}),"undefined"!=typeof regular&&null!==regular&&regular.ready(function(){var e;return e=cc.getCurrentUrlWithTracker(),e=e.replace(/(&|\?)(h=\w+&?)/,"$1"),0===t&&(t=1),regular.onMenuShareTimeline({title:cc.dmTitle,desc:cc.dmDesc,link:e,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga&&ga("send","event","\u4f5c\u54c1\u9875\u9762","\u5206\u4eab"),cc.show_invite?o("HW_SHARE_SUC","TIMELINE"):o("HW_SHARE_SUC","TIMELINE_NP")}}),regular.onMenuShareAppMessage({title:cc.dmTitle,desc:cc.dmDesc,link:e,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga&&ga("send","event","\u4f5c\u54c1\u9875\u9762","\u5206\u4eab"),cc.show_invite?o("HW_SHARE_SUC","MESSAGE"):o("HW_SHARE_SUC","MESSAGE_NP")}}),regular.onMenuShareQQ({title:cc.dmTitle,desc:cc.dmDesc,link:e,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga&&ga("send","event","\u4f5c\u54c1\u9875\u9762","\u5206\u4eab"),cc.show_invite?o("HW_SHARE_SUC","QQ"):o("HW_SHARE_SUC","QQ_NP")}})}),o=function(e,t){var n,o,r,a,s,l;if(l=Math.round((new Date).getTime()/1e3),r=cc.homework.student_id||cc.homework.guest_id,$.ajax({url:"/web/hw_share_log",method:"put",data:{sid:cc.homework._id.$oid,act:e,at:l,d:t,who:r.$oid}}),"MESSAGE"!==t&&"TIMELINE"!==t||(a=$.cookie("invite-display-times"),null===a&&(a="0"),s=parseInt(a),s+=1,$.cookie("invite-display-times",s.toString()),$(".invite-ticket").fadeIn(300),s<3&&(n=cc.imgurl,swal({title:"\u9080\u8bf7\u597d\u53cb",text:i+" \u4f5c\u54c1\u597d\u68d2\uff0c\u8001\u5e08\u7a0d\u540e\u4f1a\u5ba1\u6838\u5e76\u4e14\u8bc4\u8bba\u4f5c\u54c1\ud83d\ude0a\u3002\n\u60a8\u8fd8\u53ef\u4ee5\u9080\u8bf7\u5c0f\u4f19\u4f34\u4e00\u8d77\u5b66\u54e6 \u63a8\u8350\u6210\u529f\u540e\uff0c\u60a8\u548c\u670b\u53cb\u90fd\u4f1a\u6709\u798f\u5229\u54e6\uff1a\uff09",imageUrl:n,imageSize:"278x64",confirmButtonText:"\u9080\u8bf7\u597d\u53cb",cancelButtonText:"\u4e0d\u9080\u8bf7",showCancelButton:!0},function(e){if(e)return window.location.href="/web/invite"}))),/TIMELINE/.test(t)&&0===(null!=(o=cc.homework)?o.tag:void 0))return $("#lecture_"+cc.main_lec_id).fadeIn(10).css({height:3e3,width:2900}).animate({height:30,width:29})}})}.call(this),function(){var e,t;e="web-homework_share-sticker_share",$(document).on("page:load#"+e,function(){return startConfettis("canvEffect"),"undefined"!=typeof regular&&null!==regular?regular.ready(function(){var e;return e=cc.getCurrentUrlWithTracker(),regular.onMenuShareTimeline({title:cc.dmTitle,link:e,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga&&ga("send","event","\u8d34\u7eb8\u626b\u7801\u9875\u9762","\u5206\u4eab"),t("STICKER_SHARE_SUC","TIMELINE")}}),regular.onMenuShareAppMessage({title:cc.dmTitle,link:e,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga&&ga("send","event","\u8d34\u7eb8\u626b\u7801\u9875\u9762","\u5206\u4eab"),t("STICKER_SHARE_SUC","MESSAGE")}})}):void 0}),t=function(e,t){return $.ajax({url:"/web/hw_share_log",method:"put",data:{sid:cc.homework._id.$oid,act:e,at:Math.round((new Date).getTime()/1e3),d:t,who:cc.homework.student_id.$oid}})}}.call(this),function(){var e,t;e="web-knowledge_videos-show",$(document).on("page:load#"+e,function(){return $("video").one("play",function(){return t("PLAYED")}),"undefined"!=typeof regular&&null!==regular?regular.ready(function(){var e;return e=cc.getCurrentUrlWithTracker(),regular.onMenuShareTimeline({title:cc.dmTitle,link:e,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga&&ga("send","event","\u56de\u987e\u77e5\u8bc6\u70b9","\u5206\u4eab"),t("SHARE_TIMELINE")}}),regular.onMenuShareAppMessage({title:cc.dmTitle,link:e,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga&&ga("send","event","\u56de\u987e\u77e5\u8bc6\u70b9","\u5206\u4eab"),t("SHARE_MESSAGE")}})}):void 0}),t=function(e){return $.post("/knowledge_video_logs",{knowledge_video_log:{knowledge_video_id:cc.knowledgeVideo._id.$oid,action:e}})}}.call(this),function(){var e;e="web-orders-index",$(document).on("page:load#"+e,function(){return $("li.order").on("click touch",function(){return window.location.href="/web/orders?oid="+$(this).attr("id")})})}.call(this),function(){var e;e="web-orders-new",$(document).on("page:load#"+e,function(){var e,t,n,i,o,r,a,s,l,c,u,d,p,m,f,h,g,w;if(g=$("#mainPlayer"),g.length>0&&(top.player=new MediaElement("mainPlayer",{enablePluginDebug:!0,success:function(){},playing:function(){}})),o=function(){if(g.length>0)return g.fadeOut(350),top.player.pause()},p=function(){if(g.length>0)return g.fadeIn(350)},f=function(e,t){var n;return n=e-t,n<0&&(n=0),$("#discount").text(t),$("#sumup").text(n),$("#disc").text(t)},c=cc.good.price,w=0,cc.coupons)for(d=cc.coupons,r=0,s=d.length;r<s;r++)a=d[r],w<180&&(w+=parseFloat(a.value),a.selected=!0);return f(c,w),$("a.use-now").on("click",function(){var e,t,n,i,r,s,l;for(o(),t="<p>\u4f18\u60e0\u5238\u53ea\u80fd\u6309\u5f20\u8fdb\u884c\u6d88\u8d39\uff0c\u8d85\u51fa\u90e8\u5206\u4e0d\u4f1a\u8fd4\u8fd8\u54df</p><br>",l=0,r=cc.coupons,n=0,i=r.length;n<i;n++)a=r[n],!0===a.selected?(e="'c-check fa fa-check-circle-o'",l+=parseFloat(a.value)):e="'c-check fa fa-circle-o'",t=t+"<div class = c-coupon><a class="+e+" id="+a._id.$oid+" value="+a.value+"><span>\xa5"+a.value+"</span></a></div>";return l>parseFloat(c)?t+="<h class='amount'>\u8fd8\u9700\u652f\u4ed8<span class='amount-span'>0</span>\u5143</h>":t+="<h class='amount'>\u8fd8\u9700\u652f\u4ed8<span class='amount-span'>"+(c-l)+"</span>\u5143</h>",swal({title:"\u4f7f\u7528\u4f18\u60e0\u5238",text:t,confirmButtonText:"\u4f7f\u7528",cancelButtonText:"\u5168\u90e8\u4e0d\u4f7f\u7528",showCancelButton:!0,html:!0},function(e){var t,n,i;if(e);else{for(i=cc.coupons,t=0,n=i.length;t<n;t++)a=i[t],!0===a.selected&&(a.selected=!1);l=0}return f(c,l),p()}),$(".c-check > span").on("click",function(e){var t;return t=$(e.target).parent(),s(t),e.stopPropagation()}),$(".c-check").on("click",function(e){var t;return t=$(e.target),s(t)}),s=function(e){var t,n,i,o,r,s,u;for(u=e.attr("value"),s=!1,e.hasClass("fa-check-circle-o")?(e.removeClass("fa-check-circle-o").addClass("fa-circle-o"),l-=parseFloat(u),s=!1):(e.removeClass("fa-circle-o").addClass("fa-check-circle-o"),l+=parseFloat(u),s=!0),t=c-l,t<0&&(t=0),$(".amount-span").text(""+t),o=cc.coupons,r=[],n=0,i=o.length;n<i;n++)a=o[n],a._id.$oid===e.attr("id")?r.push(a.selected=s):r.push(void 0);return r}}),e=function(e,t){var n;if(!e.hasClass("not-aviable"))return n=parseInt(e.find("p.count").html()),n+=t,n<=0?(n=0,e.addClass("removed")):e.removeClass("removed"),e.find("p.count").html(n.toString()),u()},u=function(){var e,t,n,i;return t=cc.postal_fee,e=0,$("li.good").each(function(){var n,i;if(!$(this).hasClass("not-aviable"))return c=parseFloat($(this).data("price")),i=0,i=parseFloat($(this).data("origin"))-c,n=parseFloat($.trim($(this).find("p.count").text())),e+=i*n,t+=c*n}),n=Math.round(100*e)/100,i=Math.round(100*t)/100,$("span.money.discount").html(n.toFixed(2)),$("span.money.sumup").html(i.toFixed(2)),t<=0?$("a.button.payment").fadeOut():$("a.button.payment").fadeIn()},$("li.good .amount a").on("touch click",function(t){var n,i,o;if(o=$(t.target),i=o.parents(".good.book-item"),n=0,o.hasClass("plus")&&(n=1),o.hasClass("reduce")&&(n=-1),i)return e(i,n)}),$("a.getaddr").on("touch click",function(){return regular.openAddress({success:function(e){if(console.info(e),"openAddress:ok"===e.errMsg)return $("input#name").val(e.userName),$("input#address").val(e.detailInfo),$("input#city").val(e.provinceName+","+e.cityName),$("input#post_code").val(e.postalCode)},cancel:function(){return swal({title:"\u9519\u8bef",text:"\u60a8\u9009\u62e9\u4e86\u4e0d\u4f7f\u7528\u5fae\u4fe1\u5730\u5740,\u8bf7\u624b\u52a8\u586b\u5199\u6536\u4ef6\u5730\u5740",type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:3e3})}})}),$(".addressee.main-block").on("click touch",function(){if($(".addressee.main-block").hasClass("folded"))return $(".addressee.main-block").removeClass("folded"),$(".addressee.main-block p.detail").hide(),$(".addressee.main-block .modifier").slideDown()}),n=function(e){return!!/^1[34578]\d{9}$/.test(e)},$(".button.payment").on("click",function(){return console.log("clicked"),"function"==typeof ga&&ga("send","event","\u8ba2\u5355","\u70b9\u51fb\u8d2d\u4e70"),o(),cc.user.phone?i(cc.user.phone):swal({title:"\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7\u7801",text:"\u65b9\u4fbf\u8054\u7cfb\u4ee5\u53ca\u6536\u5230\u5f00\u8bfe\u901a\u77e5\u54e6",type:"input",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0},function(e){return!1===e?(p(),!1):""===e?(swal.showInputError("\u8f93\u5165\u70b9\u4ec0\u4e48\u5457"),!1):!1===n(e)?(swal.showInputError("\u60a8\u8f93\u5165\u7684\u4e0d\u662f\u624b\u673a\u53f7\u5427\uff1f"),!1):i(e)})}),$(".button.update").on("click",function(){return h()}),h=function(){var e,t,n,i,o,r;return i=$("input#name").val(),e=$("input#address").val(),t=$("input#city").val(),o=$("input#post_code").val(),r=$("input#tel").val(),n={},$("li.good").each(function(){return n[$(this).data("gid")]=$.trim($(this).find("p.count").text())}),$.ajax({url:cc.payment_path,type:"PUT",dataType:"json",timeout:2e4,data:{oid:cc.order.oid,gids:cc.good.id,addressee:{name:i,address:e,city:t,post_code:o,tel:r}},error:function(e,t){return console.log("update error.."+t)},success:function(){return console.log("order updated")}})},i=function(e){var t,n,i,r,a,s,c;return a=$("input#name").val(),t=$("input#address").val(),n=$("input#city").val(),s=$("input#post_code").val(),c=$("input#tel").val(),o(),""===a||""===t||""===c?void swal({title:"\u9519\u8bef",text:"\u6536\u4ef6\u4eba, \u5730\u5740 \u548c \u7535\u8bdd\u90fd\u4e0d\u80fd\u4e3a\u7a7a\u54df~ \u4eb2",type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:3e3}):(r={},$("li.good").each(function(){return r[$(this).data("gid")]=$.trim($(this).find("p.count").text())}),i=parseFloat($("#sumup").text()),swal({title:"\u8bf7\u7a0d\u5019",text:"\u7b49\u5f85\u5fae\u4fe1\u652f\u4ed8\u4e2d",imageUrl:"/assets/web/loading.svg",showConfirmButton:!1}),$.ajax({url:cc.payment_path+cc.order._id.$oid,type:"PUT",dataType:"json",timeout:2e4,data:{gids:cc.good.id,phone:e,coupons:cc.coupons,amount:i,addressee:{name:a,address:t,city:n,post_code:s,tel:c}},error:function(e,t){return console.log("error.."+t),swal({title:"\u9519\u8bef",text:"\u4ee3\u7801:"+JSON.stringify(e.responseJSON)+" - "+t,type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:3e3}),p()},success:function(e){return"order updated"===e.msg?swal({title:"\u652f\u4ed8\u6210\u529f",type:"success",allowOutsideClick:!1,showConfirmButton:!0},function(){return!0===e.l0?window.location.href="/followme":window.location.href="/followme?nl0=true"}):l(e)}}))},l=function(e){var n;return m("Got unified order, attempting call WXJSBridge"),m("payment data: "+JSON.stringify(e)),n=e.out_trade_no,regular.chooseWXPay({timestamp:e.params.timeStamp,nonceStr:e.params.nonceStr,"package":e.params["package"],signType:e.params.signType,paySign:e.params.paySign,success:function(){return t(n)},cancel:function(){return swal.close(),p()},error:function(e){return swal({title:"\u9519\u8bef",text:"\u4ee3\u7801:"+JSON.stringify(e),allowOutsideClick:!0,showConfirmButton:!1,timer:3e3}),p()}})},t=function(e){return m("checking payment"+e),$.ajax({url:"/web/wechat/check_payment",type:"GET",dataType:"json",timeout:55e3,data:{out_trade_no:e,coupons:cc.coupons},success:function(e){var t;return m("check payment success"),m(JSON.stringify(e)),t=e.status,"SUCCESS"===t?(swal({title:"\u652f\u4ed8\u6210\u529f",type:"success",allowOutsideClick:!1,showConfirmButton:!0},function(){return!0===e.l0?window.location.href="/followme":window.location.href="/followme?nl0=true"}),startConfettis("canvEffect")):(swal.close(),p())},error:function(e){return m("check payment failed"),m(e),p(),swal({title:"\u9519\u8bef",text:"\u65e0\u6cd5\u9a8c\u8bc1\u652f\u4ed8",type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:3e3})}})},m=function(e){return console.log("sending slack message: "+e)}})}.call(this),function(){var e;e="web-orders-edit",$(document).on("page:load#"+e,function(){var e,t,n,i,o,r,a,s,l,c,u,d,p,m,f,h,g,w;if(g=$("#mainPlayer"),g.length>0&&(top.player=new MediaElement("mainPlayer",{enablePluginDebug:!0,success:function(){},playing:function(){}})),o=function(){if(g.length>0)return g.fadeOut(350),top.player.pause()},p=function(){if(g.length>0)return g.fadeIn(350)},f=function(e,t){var n;return n=e-t,n<0&&(n=0),$("#discount").text(t),$("#sumup").text(n),$("#disc").text(t)},c=cc.good.price,w=0,cc.coupons)for(d=cc.coupons,r=0,s=d.length;r<s;r++)a=d[r],w<180&&(w+=parseFloat(a.value),a.selected=!0);return f(c,w),$("a.use-now").on("click",function(){var e,t,n,i,r,s,l;for(o(),t="<p>\u4f18\u60e0\u5238\u53ea\u80fd\u6309\u5f20\u8fdb\u884c\u6d88\u8d39\uff0c\u8d85\u51fa\u90e8\u5206\u4e0d\u4f1a\u8fd4\u8fd8\u54df</p><br>",l=0,r=cc.coupons,n=0,i=r.length;n<i;n++)a=r[n],!0===a.selected?(e="'c-check fa fa-check-circle-o'",l+=parseFloat(a.value)):e="'c-check fa fa-circle-o'",t=t+"<div class = c-coupon><a class="+e+" id="+a._id.$oid+" value="+a.value+"><span>\xa5"+a.value+"</span></a></div>";return l>parseFloat(c)?t+="<h class='amount'>\u8fd8\u9700\u652f\u4ed8<span class='amount-span'>0</span>\u5143</h>":t+="<h class='amount'>\u8fd8\u9700\u652f\u4ed8<span class='amount-span'>"+(c-l)+"</span>\u5143</h>",swal({title:"\u4f7f\u7528\u4f18\u60e0\u5238",text:t,confirmButtonText:"\u4f7f\u7528",cancelButtonText:"\u5168\u90e8\u4e0d\u4f7f\u7528",showCancelButton:!0,html:!0},function(e){var t,n,i;if(e);else{for(i=cc.coupons,t=0,n=i.length;t<n;t++)a=i[t],!0===a.selected&&(a.selected=!1);l=0}return f(c,l),p()}),$(".c-check > span").on("click",function(e){var t;return t=$(e.target).parent(),s(t),e.stopPropagation()}),$(".c-check").on("click",function(e){var t;return t=$(e.target),s(t)}),s=function(e){var t,n,i,o,r,s,u;for(u=e.attr("value"),s=!1,e.hasClass("fa-check-circle-o")?(e.removeClass("fa-check-circle-o").addClass("fa-circle-o"),l-=parseFloat(u),s=!1):(e.removeClass("fa-circle-o").addClass("fa-check-circle-o"),l+=parseFloat(u),s=!0),t=c-l,t<0&&(t=0),$(".amount-span").text(""+t),o=cc.coupons,r=[],n=0,i=o.length;n<i;n++)a=o[n],a._id.$oid===e.attr("id")?r.push(a.selected=s):r.push(void 0);return r}}),e=function(e,t){var n;if(!e.hasClass("not-aviable"))return n=parseInt(e.find("p.count").html()),n+=t,n<=0?(n=0,e.addClass("removed")):e.removeClass("removed"),e.find("p.count").html(n.toString()),u()},u=function(){var e,t,n,i;return t=cc.postal_fee,e=0,$("li.good").each(function(){var n,i;if(!$(this).hasClass("not-aviable"))return c=parseFloat($(this).data("price")),i=0,i=parseFloat($(this).data("origin"))-c,n=parseFloat($.trim($(this).find("p.count").text())),e+=i*n,t+=c*n}),n=Math.round(100*e)/100,i=Math.round(100*t)/100,$("span.money.discount").html(n.toFixed(2)),$("span.money.sumup").html(i.toFixed(2)),t<=0?$("a.button.payment").fadeOut():$("a.button.payment").fadeIn()},$("li.good .amount a").on("touch click",function(t){var n,i,o;if(o=$(t.target),i=o.parents(".good.book-item"),n=0,o.hasClass("plus")&&(n=1),o.hasClass("reduce")&&(n=-1),i)return e(i,n)}),$("a.getaddr").on("touch click",function(){return regular.openAddress({success:function(e){if(console.info(e),"openAddress:ok"===e.errMsg)return $("input#name").val(e.userName),$("input#address").val(e.detailInfo),$("input#city").val(e.provinceName+","+e.cityName),$("input#post_code").val(e.postalCode)},cancel:function(){return swal({title:"\u9519\u8bef",text:"\u60a8\u9009\u62e9\u4e86\u4e0d\u4f7f\u7528\u5fae\u4fe1\u5730\u5740,\u8bf7\u624b\u52a8\u586b\u5199\u6536\u4ef6\u5730\u5740",type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:3e3})}})}),$(".addressee.main-block").on("click touch",function(){if($(".addressee.main-block").hasClass("folded"))return $(".addressee.main-block").removeClass("folded"),$(".addressee.main-block p.detail").hide(),$(".addressee.main-block .modifier").slideDown()}),n=function(e){return!!/^1[34578]\d{9}$/.test(e)},$(".button.payment").on("click",function(){return console.log("clicked"),"function"==typeof ga&&ga("send","event","\u8ba2\u5355","\u70b9\u51fb\u8d2d\u4e70"),o(),cc.user.phone?i(cc.user.phone):swal({title:"\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7\u7801",text:"\u65b9\u4fbf\u8054\u7cfb\u4ee5\u53ca\u6536\u5230\u5f00\u8bfe\u901a\u77e5\u54e6",type:"input",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0},function(e){return!1===e?(p(),!1):""===e?(swal.showInputError("\u8f93\u5165\u70b9\u4ec0\u4e48\u5457"),!1):!1===n(e)?(swal.showInputError("\u60a8\u8f93\u5165\u7684\u4e0d\u662f\u624b\u673a\u53f7\u5427\uff1f"),!1):i(e)})}),$(".button.update").on("click",function(){return h()}),h=function(){var e,t,n,i,o,r;return i=$("input#name").val(),e=$("input#address").val(),t=$("input#city").val(),o=$("input#post_code").val(),r=$("input#tel").val(),n={},$("li.good").each(function(){return n[$(this).data("gid")]=$.trim($(this).find("p.count").text())}),$.ajax({
url:cc.payment_path,type:"PUT",dataType:"json",timeout:2e4,data:{oid:cc.order.oid,gids:cc.good.id,addressee:{name:i,address:e,city:t,post_code:o,tel:r}},error:function(e,t){return console.log("update error.."+t)},success:function(){return console.log("order updated")}})},i=function(e){var t,n,i,r,a,s,c;return a=$("input#name").val(),t=$("input#address").val(),n=$("input#city").val(),s=$("input#post_code").val(),c=$("input#tel").val(),o(),""===a||""===t||""===c?void swal({title:"\u9519\u8bef",text:"\u6536\u4ef6\u4eba, \u5730\u5740 \u548c \u7535\u8bdd\u90fd\u4e0d\u80fd\u4e3a\u7a7a\u54df~ \u4eb2",type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:3e3}):(r={},$("li.good").each(function(){return r[$(this).data("gid")]=$.trim($(this).find("p.count").text())}),i=parseFloat($("#sumup").text()),swal({title:"\u8bf7\u7a0d\u5019",text:"\u7b49\u5f85\u5fae\u4fe1\u652f\u4ed8\u4e2d",imageUrl:"/assets/web/loading.svg",showConfirmButton:!1}),$.ajax({url:cc.payment_path+cc.order._id.$oid,type:"PUT",dataType:"json",timeout:2e4,data:{gids:cc.good.id,phone:e,coupons:cc.coupons,amount:i,addressee:{name:a,address:t,city:n,post_code:s,tel:c}},error:function(e,t){return console.log("error.."+t),swal({title:"\u9519\u8bef",text:"\u4ee3\u7801:"+JSON.stringify(e.responseJSON)+" - "+t,type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:3e3}),p()},success:function(e){return"order updated"===e.msg?swal({title:"\u652f\u4ed8\u6210\u529f",type:"success",allowOutsideClick:!1,showConfirmButton:!0},function(){return!0===e.l0?window.location.href="/followme":window.location.href="/followme?nl0=true"}):l(e)}}))},l=function(e){var n;return m("Got unified order, attempting call WXJSBridge"),m("payment data: "+JSON.stringify(e)),n=e.out_trade_no,regular.chooseWXPay({timestamp:e.params.timeStamp,nonceStr:e.params.nonceStr,"package":e.params["package"],signType:e.params.signType,paySign:e.params.paySign,success:function(){return t(n)},cancel:function(){return swal.close(),p()},error:function(e){return swal({title:"\u9519\u8bef",text:"\u4ee3\u7801:"+JSON.stringify(e),allowOutsideClick:!0,showConfirmButton:!1,timer:3e3}),p()}})},t=function(e){return m("checking payment"+e),$.ajax({url:"/web/wechat/check_payment",type:"GET",dataType:"json",timeout:55e3,data:{out_trade_no:e,coupons:cc.coupons},success:function(e){var t;return m("check payment success"),m(JSON.stringify(e)),t=e.status,"SUCCESS"===t?(swal({title:"\u652f\u4ed8\u6210\u529f",type:"success",allowOutsideClick:!1,showConfirmButton:!0},function(){return!0===e.l0?window.location.href="/followme":window.location.href="/followme?nl0=true"}),startConfettis("canvEffect")):(swal.close(),p())},error:function(e){return m("check payment failed"),m(e),p(),swal({title:"\u9519\u8bef",text:"\u65e0\u6cd5\u9a8c\u8bc1\u652f\u4ed8",type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:3e3})}})},m=function(e){return console.log("sending slack message: "+e)}})}.call(this),function(){var e;e="web-orders-show",$(document).on("page:load#"+e,function(){var e,t;return e=function(){var e,t,n,i,o;return n=$("input#name").val(),e=$("input#address").val(),t=$("input#city").val(),i=$("input#post_code").val(),o=$("input#tel").val(),""===n||""===e||""===o?void swal({title:"\u9519\u8bef",text:"\u6536\u4ef6\u4eba, \u5730\u5740 \u548c \u7535\u8bdd\u90fd\u4e0d\u80fd\u4e3a\u7a7a\u54df~ \u4eb2",type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:3e3}):(swal({title:"\u8bf7\u7a0d\u5019",text:"\u66f4\u65b0\u8d44\u6599\u4e2d...",imageUrl:"/assets/web/loading.svg",showConfirmButton:!1}),$.ajax({url:cc.payment_path,type:"PUT",dataType:"json",timeout:2e4,data:{oid:cc.oid,addressee:{name:n,address:e,city:t,post_code:i,tel:o}},error:function(e,t){return swal({title:"\u9519\u8bef",text:""+t,type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:3e3})},success:function(){return swal({title:"\u5730\u5740\u66f4\u65b0\u6210\u529f",type:"success",allowOutsideClick:!1,showConfirmButton:!0})}}))},t=function(){var e;return e=$("textarea#note").val(),swal({title:"\u8bf7\u7a0d\u5019",text:"\u66f4\u65b0\u5907\u6ce8\u4e2d...",imageUrl:"/assets/web/loading.svg",showConfirmButton:!1}),console.info(e),$.ajax({url:cc.payment_path,type:"PUT",dataType:"json",timeout:2e4,data:{oid:cc.oid,customer_notes:e},error:function(e,t){return swal({title:"\u9519\u8bef",text:""+t,type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:3e3})},success:function(){return swal({title:"\u5907\u6ce8\u66f4\u65b0\u6210\u529f",type:"success",allowOutsideClick:!1,showConfirmButton:!0})}})},$("a.saveAddr").on("click touch",function(){return e()}),$("a.saveNote").on("click touch",function(){return t()}),$("a.getaddr").on("touch click",function(){return regular.openAddress({success:function(e){if(console.info(e),"openAddress:ok"===e.errMsg)return $("input#name").val(e.userName),$("input#address").val(e.detailInfo),$("input#city").val(e.provinceName+","+e.cityName),$("input#post_code").val(e.postalCode)},cancel:function(){return swal({title:"\u9519\u8bef",text:"\u60a8\u9009\u62e9\u4e86\u4e0d\u4f7f\u7528\u5fae\u4fe1\u5730\u5740,\u8bf7\u624b\u52a8\u586b\u5199\u6536\u4ef6\u5730\u5740",type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:3e3})}})})})}.call(this),function(){$(document).on("page:load#web-users-active",function(e,t){return console.log(e),console.log(t),"undefined"!=typeof regular&&null!==regular?regular.ready(function(){return regular.onMenuShareTimeline({title:"\u897f\u74dc\u8da3\u5473\u7f16\u7a0b\u8425 - \u6fc0\u6d3b\u7528\u6237",link:top.location.href,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga?ga("send","event","\u666e\u901a\u9875\u9762","\u5206\u4eab"):void 0}}),regular.onMenuShareAppMessage({title:"\u897f\u74dc\u8da3\u5473\u7f16\u7a0b\u8425 - \u6fc0\u6d3b\u7528\u6237",link:top.location.href,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga?ga("send","event","\u666e\u901a\u9875\u9762","\u5206\u4eab"):void 0}})}):void 0})}.call(this),function(){$(document).on("page:load#web-users-create",function(e,t){return console.log(e),console.log(t),"undefined"!=typeof regular&&null!==regular&&regular.ready(function(){return regular.onMenuShareTimeline({title:"\u897f\u74dc\u8da3\u5473\u7f16\u7a0b\u8425 - \u6fc0\u6d3b\u7528\u6237",link:top.location.href,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga?ga("send","event","\u666e\u901a\u9875\u9762","\u5206\u4eab"):void 0}}),regular.onMenuShareAppMessage({title:"\u897f\u74dc\u8da3\u5473\u7f16\u7a0b\u8425 - \u6fc0\u6d3b\u7528\u6237",link:top.location.href,imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga?ga("send","event","\u666e\u901a\u9875\u9762","\u5206\u4eab"):void 0}})}),$("#avatar").on("touch click",function(){return regular.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var t;return t=e.localIds[0],regular.uploadImage({localId:t,isShowProgressTips:1,success:function(e){var t,n;return t=e.serverId,$("#avatar-link").attr("value",t),n=t,regular.downloadImage({serverId:n,isShowProgressTips:1,success:function(e){var t;return t=e.localId,$("#avatar-image").attr("src",t)}})},fail:function(){return"",t="",swal({title:"\u5931\u8d25",text:"\u4e0a\u4f20\u56fe\u7247\u5931\u8d25\u54e6",type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:2e3})}})},fail:function(){return swal({title:"\u5931\u8d25",text:"\u6253\u5f00\u56fe\u7247\u5931\u8d25\u54e6",type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:2e3})}})})})}.call(this),function(){$(document).on("page:load#web-users-dashboard",function(){return $("#hoc").on("touch click",function(){return swal({title:"\u52a0\u6cb9\u54e6\uff01",text:cc.student_name+" \u73b0\u5728\u7684\u5b66\u4e60\u65f6\u95f4\u8fd8\u6ca1\u6709\u8fbe\u5230\uff0c\u8fbe\u5230\u4e00\u5b9a\u5b66\u4e60\u65f6\u95f4\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u89e3\u9501\u83b7\u5f97\u3010\u7f16\u7a0b\u4e00\u5c0f\u65f6\u3011\u8bc1\u4e66\u5566\uff01",type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:2e3})}),$("#next").on("touch click",function(){var e;return e=cc.student,$.ajax({url:"/web/check_next_level",method:"put",data:{sid:e},error:function(){return swal({title:"\u554a\u54c8",text:"\u540e\u7eed\u7684\u8bfe\u7a0b\u6682\u65f6\u6ca1\u6709\u5f00\u653e\u54e6\uff0c\u8bf7\u7b49\u5f85\u8001\u5e08\u7684\u901a\u77e5",type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:2e3})},success:function(e){return window.location.href=e.url}})}),$("#avatar").on("touch click",function(){return regular.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var t;return t=e.localIds[0],regular.uploadImage({localId:t,isShowProgressTips:1,success:function(e){var t,n;return t=e.serverId,$("#avatar-link").attr("value",t),n=t,regular.downloadImage({serverId:n,isShowProgressTips:1,success:function(e){var t;return t=e.localId,$("#avatar-image").attr("src",t)}})},fail:function(){return"",t="",swal({title:"\u5931\u8d25",text:"\u4e0a\u4f20\u56fe\u7247\u5931\u8d25\u54e6",type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:2e3})}})},fail:function(){return swal({title:"\u5931\u8d25",text:"\u6253\u5f00\u56fe\u7247\u5931\u8d25\u54e6",type:"warning",allowOutsideClick:!0,showConfirmButton:!1,timer:2e3})}})})})}.call(this),function(){$(document).on("page:load#web-users-edit",function(){return console.info("edit user"),$("a.button#save").on("touch click",function(){var e,t,n;return n=$("input#name").val(),e=$("input#desc1").val(),t=$("input#desc2").val(),swal({title:"\u66f4\u65b0\u4e2d",text:"\u8bf7\u7a0d\u5019,\u9a6c\u4e0a\u5c31\u597d...",imageUrl:"/assets/web/loading.svg",showConfirmButton:!1}),$.ajax({url:"/web/user",method:"put",data:{name:n,line1:e,line2:t},success:function(){return window.location.href="/web/profile"}})})})}.call(this),function(){$(document).on("page:load#web-users-invite",function(){return $("a.button").on("click",function(){return $(".share-title").fadeIn(300)}),"undefined"!=typeof regular&&null!==regular?regular.ready(function(){var e;return cc.sid?e="https://s.jita.im/dm?sid="+cc.sid:cc.uid&&(e="https://s.jita.im/dm?uid="+cc.uid),regular.onMenuShareTimeline({title:cc.dmTitle,desc:cc.dmDesc,link:e,imgUrl:cc.moment_icon,success:function(){var e;return"function"==typeof ga&&ga("send","event","\u9080\u8bf7\u754c\u9762","\u9080\u8bf7"),e=Math.round((new Date).getTime()/1e3),$.ajax({url:"/olog",method:"put",data:{sid:null,act:"DM2_SHARE_INVITE",at:e,d:"TIMELINE",who:cc.uid}})}}),regular.onMenuShareAppMessage({title:cc.dmTitle,desc:cc.dmDesc,link:e,imgUrl:cc.moment_icon,success:function(){var e;return"function"==typeof ga&&ga("send","event","\u9080\u8bf7\u754c\u9762","\u9080\u8bf7"),e=Math.round((new Date).getTime()/1e3),$.ajax({url:"/olog",method:"put",data:{sid:null,act:"DM2_SHARE_INVITE",at:e,d:"MESSAGE",who:cc.uid}})}})}):void 0})}.call(this),function(){$(document).on("page:load#web-users-profile",function(){return console.info("profile loaded"),$(".booklist-items .item").on("touch click",function(e){var t,n,i;return t=$(e.target),void 0===t.data("slug")&&(t=t.parent(".item")),n=t.data("slug"),i=t.data("draft"),window.location.href=1===i?"/web/bl/"+n+"/edit":"/web/bl/"+n+"/publish"}),$(".profile").on("touch click",function(){return window.location.href="/web/profile/edit"})})}.call(this),function(){$(document).on("page:load#web-users-show",function(){return $("a#login").on("touch click",function(e){return e.preventDefault(),$.ajax("/web/signin",{method:"POST",data:{user:"-",password:"-"},success:function(e){return Turbolinks.visit(e.url)}})})})}.call(this),function(){var e;e="web-voice_slides-index",$(document).on("page:load#"+e,function(){var e,t,n;return t=-1,n=-1,e=function(e){return $("p.console").append("<p>"+e+"</p>")},"undefined"!=typeof regular&&null!==regular&&regular.ready(function(){return $("main.main-block").fadeIn()}),$("a#rec").on("touch click",function(){return regular.startRecord({error:function(t){return e("ERR: "+t)}}),e("startRecord")}),$("a#stop").on("touch click",function(){return e("stop REC"),regular.stopRecord({success:function(n){return e("localId: "+n.localId),t=n.localId,e("res:"+n)}})}),regular.onVoiceRecordEnd({success:function(){return e("onVoiceRecordEnd success")},complete:function(n){return e("onVoiceRecordEnd"),e("localId: "+n.localId),t=n.localId,e("res:"+n)}}),$("a#play").on("touch click",function(){return e("play Rec: "+t),regular.playVoice({localId:t})}),$("a#upload").on("touch click",function(){return e("upload Rec: "+t),regular.uploadVoice({localId:t,isShowProgressTips:1,success:function(t){return n=t.serverId,e("serverId: "+t.serverId),e("res:"+t)}})})})}.call(this),function(){}.call(this),function(){var e;$(document).on("page:load#wechat-readings-show",function(){var t,n,i;return e("page load wechat/readings"),$(".button.payment").click(function(){return console.log("clicked"),n()}),n=function(){return console.log("generating order"),$.ajax({url:"/wechat/payment",type:"POST",dataType:"json",timeout:2e4,error:function(e,t){return console.log("error.."+t)},success:function(e){return i(e)}})},i=function(n){var i;return e("Got unified order, attempting call WXJSBridge"),e("payment data: "+JSON.stringify(n)),i=n.out_trade_no,$("body").append("<p> data: "+JSON.stringify(n)+"<p>"),"undefined"!=typeof WeixinJSBridge&&null!==WeixinJSBridge?WeixinJSBridge.invoke("getBrandWCPayRequest",n.params,function(){return t(i)}):void 0},t=function(t){return e("checking payment"+t),$.ajax({url:"/wechat/check_payment",type:"GET",dataType:"json",timeout:15e3,data:{out_trade_no:t},success:function(t){var n;return e("check payment success"),e(JSON.stringify(t)),n=t.status,"SUCCESS"===n?$(".button.payment").text("\u652f\u4ed8\u6210\u529f"):$("body").append("<p>\u652f\u4ed8\u5931\u8d25:"+JSON.stringify(n)+"<p>")},error:function(t){return e("check payment failed"),e(t)}})}}),e=function(e){return console.log("sending slack message: "+e),$.post("https://hooks.slack.com/services/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",'payload={"text": "'+e+'"}')}}.call(this),function(){var e;e="selected_homeworks-index",$(document).on("page:load#"+e,function(){return $(".homework-card").last().attr({id:"waypoint"}),$("#waypoint").waypoint({handler:function(){return this.destroy(),$("#waypoint").attr({id:""}),$.get($(":input[name=load-more]").val(),{timeBefore:$(".homework-card").last().data("time")})},offset:"800px"}),$(".like-button").on("touched click",function(){var e,t,n;if(t=$(this),e=t.data("sid"),console.log(e),!$(this).attr("disabled"))return n=Math.round((new Date).getTime()/1e3),$.ajax({url:"/like",method:"put",data:{sid:e,act:"LIKE",at:n,d:null},success:function(n){if(console.log(n),t.addClass("disabled"),$("#like-img-"+e).addClass("hidden"),$("#liked-img-"+e).removeClass("hidden"),n&&n.count)return $("#like-"+e).text(n.count)}})}),"undefined"!=typeof regular&&null!==regular?regular.ready(function(){return cc.getCurrentUrlWithTracker(),regular.onMenuShareTimeline({title:"\u897f\u74dc\u521b\u5ba2",desc:"\u4f18\u79c0\u4f5c\u54c1\u96c6",imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga?ga("send","event","selected_homeworks","\u5206\u4eab"):void 0}}),regular.onMenuShareAppMessage({title:"\u897f\u74dc\u521b\u5ba2",desc:"\u4f18\u79c0\u4f5c\u54c1\u96c6",imgUrl:cc.moment_icon,success:function(){return"function"==typeof ga?ga("send","event","selected_homeworks","\u5206\u4eab"):void 0}})}):void 0})}.call(this);var mejs=mejs||{};mejs.version="2.23.5",mejs.meIndex=0,mejs.plugins={silverlight:[{version:[3,0],types:["video/mp4","video/m4v","video/mov","video/wmv","audio/wma","audio/m4a","audio/mp3","audio/wav","audio/mpeg"]}],flash:[{version:[9,0,124],types:["video/mp4","video/m4v","video/mov","video/flv","video/rtmp","video/x-flv","audio/flv","audio/x-flv","audio/mp3","audio/m4a","audio/mp4","audio/mpeg","video/dailymotion","video/x-dailymotion","application/x-mpegURL","audio/ogg"]}],youtube:[{version:null,types:["video/youtube","video/x-youtube","audio/youtube","audio/x-youtube"]}],vimeo:[{version:null,types:["video/vimeo","video/x-vimeo"]}]},mejs.Utility={encodeUrl:function(e){return encodeURIComponent(e)},escapeHTML:function(e){return e.toString().split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},absolutizeUrl:function(e){var t=document.createElement("div");return t.innerHTML='<a href="'+this.escapeHTML(e)+'">x</a>',t.firstChild.href},getScriptPath:function(e){for(var t,n,i,o,r,a=0,s="",l="",c=document.getElementsByTagName("script"),u=c.length,d=e.length;u>a;a++){for(i=c[a].src,n=i.lastIndexOf("/"),n>-1?(r=i.substring(n+1),o=i.substring(0,n+1)):(r=i,o=""),t=0;d>t;t++)if(l=e[t],r.indexOf(l)>-1){s=o;break}if(""!==s)break}return s},calculateTimeFormat:function(e,t,n){0>e&&(e=0),void 0===n&&(n=25);var i=t.timeFormat,o=i[0],r=i[1]==i[0],a=r?2:1,s=":",l=Math.floor(e/3600)%24,c=Math.floor(e/60)%60,u=Math.floor(e%60),d=Math.floor((e%1*n).toFixed(3)),p=[[d,"f"],[u,"s"],[c,"m"],[l,"h"]];i.length<a&&(s=i[a]);for(var m=!1,f=0,h=p.length;h>f;f++)if(-1!==i.indexOf(p[f][1]))m=!0;else if(m){for(var g=!1,w=f;h>w;w++)if(p[w][0]>0){g=!0;break}if(!g)break;r||(i=o+i),i=p[f][1]+s+i,r&&(i=p[f][1]+i),o=p[f][1]}t.currentTimeFormat=i},twoDigitsString:function(e){return 10>e?"0"+e:String(e)},secondsToTimeCode:function(e,t){if(0>e&&(e=0),"object"!=typeof t){var n="m:ss";n=arguments[1]?"hh:mm:ss":n,n=arguments[2]?n+":ff":n,t={currentTimeFormat:n,framesPerSecond:arguments[3]||25}}var o=t.framesPerSecond;void 0===o&&(o=25);var n=t.currentTimeFormat,r=Math.floor(e/3600)%24,a=Math.floor(e/60)%60,s=Math.floor(e%60),l=Math.floor((e%1*o).toFixed(3));lis=[[l,"f"],[s,"s"],[a,"m"],[r,"h"]];var c=n;for(i=0,len=lis.length;i<len;i++)c=c.replace(lis[i][1]+lis[i][1],this.twoDigitsString(lis[i][0])),c=c.replace(lis[i][1],lis[i][0]);return c},timeCodeToSeconds:function(e,t,n,i){void 0===n?n=!1:void 0===i&&(i=25);var o=e.split(":"),r=parseInt(o[0],10),a=parseInt(o[1],10),s=parseInt(o[2],10),l=0;return n&&(l=parseInt(o[3])/i),3600*r+60*a+s+l},convertSMPTEtoSeconds:function(e){if("string"!=typeof e)return!1;e=e.replace(",",".");var t=0,n=-1!=e.indexOf(".")?e.split(".")[1].length:0,i=1;e=e.split(":").reverse();for(var o=0;o<e.length;o++)i=1,o>0&&(i=Math.pow(60,o)),t+=Number(e[o])*i;return Number(t.toFixed(n))},removeSwf:function(e){var t=document.getElementById(e);t&&/object|embed/i.test(t.nodeName)&&(mejs.MediaFeatures.isIE?(t.style.display="none",function(){4==t.readyState?mejs.Utility.removeObjectInIE(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))},removeObjectInIE:function(e){var t=document.getElementById(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}},determineScheme:function(e){return e&&-1!=e.indexOf("://")?e.substr(0,e.indexOf("://")+3):"//"},debounce:function(e,t,n){var i;return function(){var o=this,r=arguments,a=function(){i=null,n||e.apply(o,r)},s=n&&!i;clearTimeout(i),i=setTimeout(a,t),s&&e.apply(o,r)}},isNodeAfter:function(e,t){return!!(e&&t&&"function"==typeof e.compareDocumentPosition&&e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING)}},mejs.PluginDetector={hasPluginVersion:function(e,t){var n=this.plugins[e];return t[1]=t[1]||0,t[2]=t[2]||0,n[0]>t[0]||n[0]==t[0]&&n[1]>t[1]||n[0]==t[0]&&n[1]==t[1]&&n[2]>=t[2]},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(e,t,n,i,o){this.plugins[e]=this.detectPlugin(t,n,i,o)},detectPlugin:function(e,t,n,i){var o,r,a,s=[0,0,0];if("undefined"!=typeof this.nav.plugins&&"object"==typeof this.nav.plugins[e]){if((o=this.nav.plugins[e].description)&&("undefined"==typeof this.nav.mimeTypes||!this.nav.mimeTypes[t]||this.nav.mimeTypes[t].enabledPlugin))for(s=o.replace(e,"").replace(/^\s+/,"").replace(/\sr/gi,".").split("."),r=0;r<s.length;r++)s[r]=parseInt(s[r].match(/\d+/),10)}else if("undefined"!=typeof window.ActiveXObject)try{(a=new ActiveXObject(n))&&(s=i(a))}catch(e){}return s}},mejs.PluginDetector.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(e){var t=[],n=e.GetVariable("$version");return n&&(n=n.split(" ")[1].split(","),t=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]),t}),mejs.PluginDetector.addPlugin("silverlight","Silverlight Plug-In","application/x-silverlight-2","AgControl.AgControl",function(e){var t=[0,0,0,0],n=function(e,t,n,i){for(;e.isVersionSupported(t[0]+"."+t[1]+"."+t[2]+"."+t[3]);)t[n]+=i;t[n]-=i};return n(e,t,0,1),n(e,t,1,1),n(e,t,2,1e4),n(e,t,2,1e3),n(e,t,2,100),n(e,t,2,10),n(e,t,2,1),n(e,t,3,1),t}),mejs.MediaFeatures={init:function(){var e,t,n=this,i=document,o=mejs.PluginDetector.nav,r=mejs.PluginDetector.ua.toLowerCase(),a=["source","track","audio","video"];n.isiPad=null!==r.match(/ipad/i),n.isiPhone=null!==r.match(/iphone/i),n.isiOS=n.isiPhone||n.isiPad,n.isAndroid=null!==r.match(/android/i),n.isBustedAndroid=null!==r.match(/android 2\.[12]/),n.isBustedNativeHTTPS="https:"===location.protocol&&(null!==r.match(/android [12]\./)||null!==r.match(/macintosh.* version.* safari/)),n.isIE=-1!=o.appName.toLowerCase().indexOf("microsoft")||null!==o.appName.toLowerCase().match(/trident/gi),n.isChrome=null!==r.match(/chrome/gi),n.isChromium=null!==r.match(/chromium/gi),n.isFirefox=null!==r.match(/firefox/gi),n.isWebkit=null!==r.match(/webkit/gi),n.isGecko=null!==r.match(/gecko/gi)&&!n.isWebkit&&!n.isIE,n.isOpera=null!==r.match(/opera/gi),n.hasTouch="ontouchstart"in window,n.svgAsImg=!!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1");for(e=0;e<a.length;e++)t=document.createElement(a[e]);n.supportsMediaTag="undefined"!=typeof t.canPlayType||n.isBustedAndroid;try{t.canPlayType("video/mp4")}catch(e){n.supportsMediaTag=!1}n.supportsPointerEvents=function(){var e,t=document.createElement("x"),n=document.documentElement,i=window.getComputedStyle;return"pointerEvents"in t.style&&(t.style.pointerEvents="auto",t.style.pointerEvents="x",n.appendChild(t),e=i&&"auto"===i(t,"").pointerEvents,n.removeChild(t),!!e)}(),n.hasFirefoxPluginMovingProblem=!1,n.hasiOSFullScreen="undefined"!=typeof t.webkitEnterFullscreen,n.hasNativeFullscreen="undefined"!=typeof t.requestFullscreen,n.hasWebkitNativeFullScreen="undefined"!=typeof t.webkitRequestFullScreen,n.hasMozNativeFullScreen="undefined"!=typeof t.mozRequestFullScreen,n.hasMsNativeFullScreen="undefined"!=typeof t.msRequestFullscreen,n.hasTrueNativeFullScreen=n.hasWebkitNativeFullScreen||n.hasMozNativeFullScreen||n.hasMsNativeFullScreen,n.nativeFullScreenEnabled=n.hasTrueNativeFullScreen,n.hasMozNativeFullScreen?n.nativeFullScreenEnabled=document.mozFullScreenEnabled:n.hasMsNativeFullScreen&&(n.nativeFullScreenEnabled=document.msFullscreenEnabled),n.isChrome&&(n.hasiOSFullScreen=!1),n.hasTrueNativeFullScreen&&(n.fullScreenEventName="",n.hasWebkitNativeFullScreen?n.fullScreenEventName="webkitfullscreenchange":n.hasMozNativeFullScreen?n.fullScreenEventName="mozfullscreenchange":n.hasMsNativeFullScreen&&(n.fullScreenEventName="MSFullscreenChange"),n.isFullScreen=function(){return n.hasMozNativeFullScreen?i.mozFullScreen:n.hasWebkitNativeFullScreen?i.webkitIsFullScreen:n.hasMsNativeFullScreen?null!==i.msFullscreenElement:void 0},n.requestFullScreen=function(e){n.hasWebkitNativeFullScreen?e.webkitRequestFullScreen():n.hasMozNativeFullScreen?e.mozRequestFullScreen():n.hasMsNativeFullScreen&&e.msRequestFullscreen()},n.cancelFullScreen=function(){n.hasWebkitNativeFullScreen?document.webkitCancelFullScreen():n.hasMozNativeFullScreen?document.mozCancelFullScreen():n.hasMsNativeFullScreen&&document.msExitFullscreen()}),n.hasiOSFullScreen&&r.match(/mac os x 10_5/i)&&(n.hasNativeFullScreen=!1,n.hasiOSFullScreen=!1)}},mejs.MediaFeatures.init(),mejs.HtmlMediaElement={pluginType:"native",isFullScreen:!1,setCurrentTime:function(e){this.currentTime=e},setMuted:function(e){this.muted=e},setVolume:function(e){this.volume=e},stop:function(){this.pause()},setSrc:function(e){for(var t=this.getElementsByTagName("source");t.length>0;)this.removeChild(t[0]);if("string"==typeof e)this.src=e;else{var n,i;for(n=0;n<e.length;n++)if(i=e[n],this.canPlayType(i.type)){this.src=i.src;break}}},setVideoSize:function(e,t){this.width=e,this.height=t}},mejs.PluginMediaElement=function(e,t,n){this.id=e,this.pluginType=t,this.src=n,this.events={},this.attributes={}},mejs.PluginMediaElement.prototype={pluginElement:null,pluginType:"",isFullScreen:!1,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:!0,ended:!1,seeking:!1,duration:0,error:null,tagName:"",muted:!1,volume:1,currentTime:0,play:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.playVideo():this.pluginApi.playMedia(),this.paused=!1)},load:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType||this.pluginApi.loadMedia(),this.paused=!1)},pause:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?1==this.pluginApi.getPlayerState()&&this.pluginApi.pauseVideo():this.pluginApi.pauseMedia(),this.paused=!0)},stop:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.stopVideo():this.pluginApi.stopMedia(),this.paused=!0)},canPlayType:function(e){var t,n,i,o=mejs.plugins[this.pluginType];for(t=0;t<o.length;t++)if(i=o[t],mejs.PluginDetector.hasPluginVersion(this.pluginType,i.version))for(n=0;n<i.types.length;n++)if(e==i.types[n])return"probably";return""},positionFullscreenButton:function(e,t,n){null!=this.pluginApi&&this.pluginApi.positionFullscreenButton&&this.pluginApi.positionFullscreenButton(Math.floor(e),Math.floor(t),n)},hideFullscreenButton:function(){null!=this.pluginApi&&this.pluginApi.hideFullscreenButton&&this.pluginApi.hideFullscreenButton()},setSrc:function(e){if("string"==typeof e)this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(e)),this.src=mejs.Utility.absolutizeUrl(e);else{var t,n;for(t=0;t<e.length;t++)if(n=e[t],this.canPlayType(n.type)){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(n.src)),this.src=mejs.Utility.absolutizeUrl(n.src);break}}},setCurrentTime:function(e){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.seekTo(e):this.pluginApi.setCurrentTime(e),this.currentTime=e)},setVolume:function(e){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.setVolume(100*e):this.pluginApi.setVolume(e),this.volume=e)},setMuted:function(e){null!=this.pluginApi&&("youtube"==this.pluginType?(e?this.pluginApi.mute():this.pluginApi.unMute(),this.muted=e,this.dispatchEvent({type:"volumechange"})):this.pluginApi.setMuted(e),this.muted=e)},setVideoSize:function(e,t){this.pluginElement&&this.pluginElement.style&&(this.pluginElement.style.width=e+"px",this.pluginElement.style.height=t+"px"),null!=this.pluginApi&&this.pluginApi.setVideoSize&&this.pluginApi.setVideoSize(e,t)},setFullscreen:function(e){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.pluginApi.setFullscreen(e)},enterFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!0)},exitFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!1)},addEventListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},removeEventListener:function(e,t){if(!e)return this.events={},!0;var n=this.events[e];if(!n)return!0;if(!t)return this.events[e]=[],!0;for(var i=0;i<n.length;i++)if(n[i]===t)return this.events[e].splice(i,1),!0;return!1},dispatchEvent:function(e){var t,n=this.events[e.type];if(n)for(t=0;t<n.length;t++)n[t].apply(this,[e])},hasAttribute:function(e){return e in this.attributes},removeAttribute:function(e){delete this.attributes[e]},getAttribute:function(e){return this.hasAttribute(e)?this.attributes[e]:null},setAttribute:function(e,t){this.attributes[e]=t},remove:function(){mejs.Utility.removeSwf(this.pluginElement.id)}},mejs.MediaElementDefaults={mode:"auto",plugins:["flash","silverlight","youtube","vimeo"],enablePluginDebug:!1,httpsBasicAuthSite:!1,type:"",pluginPath:mejs.Utility.getScriptPath(["mediaelement.js","mediaelement.min.js","mediaelement-and-player.js","mediaelement-and-player.min.js"]),flashName:"flashmediaelement.swf",flashStreamer:"",flashScriptAccess:"sameDomain",enablePluginSmoothing:!1,enablePseudoStreaming:!1,pseudoStreamingStartQueryParam:"start",silverlightName:"silverlightmediaelement.xap",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:.8,customError:"",success:function(){},error:function(){}},mejs.MediaElement=function(e,t){return mejs.HtmlMediaElementShim.create(e,t)},mejs.HtmlMediaElementShim={create:function(e,t){var n,i,o={},r="string"==typeof e?document.getElementById(e):e,a=r.tagName.toLowerCase(),s="audio"===a||"video"===a,l=s?r.getAttribute("src"):r.getAttribute("href"),c=r.getAttribute("poster"),u=r.getAttribute("autoplay"),d=r.getAttribute("preload"),p=r.getAttribute("controls");for(i in mejs.MediaElementDefaults)o[i]=mejs.MediaElementDefaults[i];for(i in t)o[i]=t[i];return l=void 0===l||null===l||""==l?null:l,c=void 0===c||null===c?"":c,d=void 0===d||null===d||"false"===d?"none":d,u=!(void 0===u||null===u||"false"===u),p=!(void 0===p||null===p||"false"===p),n=this.determinePlayback(r,o,mejs.MediaFeatures.supportsMediaTag,s,l),n.url=null!==n.url?mejs.Utility.absolutizeUrl(n.url):"",n.scheme=mejs.Utility.determineScheme(n.url),"native"==n.method?(mejs.MediaFeatures.isBustedAndroid&&(r.src=n.url,r.addEventListener("click",function(){r.play()},!1)),this.updateNative(n,o,u,d)):""!==n.method?this.createPlugin(n,o,c,u,d,p):(this.createErrorMessage(n,o,c),this)},determinePlayback:function(e,t,n,i,o){var r,a,s,l,c,u,d,p,m,f,h,g=[],w={method:"",url:"",htmlMediaElement:e,isVideo:"audio"!==e.tagName.toLowerCase(),scheme:""};if("undefined"!=typeof t.type&&""!==t.type)if("string"==typeof t.type)g.push({type:t.type,url:o});else for(r=0;r<t.type.length;r++)g.push({type:t.type[r],url:o});else if(null!==o)u=this.formatType(o,e.getAttribute("type")),g.push({type:u,url:o});else for(r=0;r<e.childNodes.length;r++)c=e.childNodes[r],1==c.nodeType&&"source"==c.tagName.toLowerCase()&&(o=c.getAttribute("src"),u=this.formatType(o,c.getAttribute("type")),(!(h=c.getAttribute("media"))||!window.matchMedia||window.matchMedia&&window.matchMedia(h).matches)&&g.push({type:u,url:o}));if(!i&&g.length>0&&null!==g[0].url&&this.getTypeFromFile(g[0].url).indexOf("audio")>-1&&(w.isVideo=!1),w.isVideo&&mejs.MediaFeatures.isBustedAndroid&&(e.canPlayType=function(e){return null!==e.match(/video\/(mp4|m4v)/gi)?"maybe":""}),w.isVideo&&mejs.MediaFeatures.isChromium&&(e.canPlayType=function(e){return null!==e.match(/video\/(webm|ogv|ogg)/gi)?"maybe":""}),n&&("auto"===t.mode||"auto_plugin"===t.mode||"native"===t.mode)&&(!mejs.MediaFeatures.isBustedNativeHTTPS||!0!==t.httpsBasicAuthSite)){for(i||(f=document.createElement(w.isVideo?"video":"audio"),e.parentNode.insertBefore(f,e),e.style.display="none",w.htmlMediaElement=e=f),r=0;r<g.length;r++)if("video/m3u8"==g[r].type||""!==e.canPlayType(g[r].type).replace(/no/,"")||""!==e.canPlayType(g[r].type.replace(/mp3/,"mpeg")).replace(/no/,"")||""!==e.canPlayType(g[r].type.replace(/m4a/,"mp4")).replace(/no/,"")){w.method="native",w.url=g[r].url;break}if("native"===w.method&&(null!==w.url&&(e.src=w.url),"auto_plugin"!==t.mode))return w}if("auto"===t.mode||"auto_plugin"===t.mode||"shim"===t.mode)for(r=0;r<g.length;r++)for(u=g[r].type,a=0;a<t.plugins.length;a++)for(d=t.plugins[a],p=mejs.plugins[d],s=0;s<p.length;s++)if(m=p[s],null==m.version||mejs.PluginDetector.hasPluginVersion(d,m.version))for(l=0;l<m.types.length;l++)if(u.toLowerCase()==m.types[l].toLowerCase())return w.method=d,w.url=g[r].url,w;return"auto_plugin"===t.mode&&"native"===w.method?w:(""===w.method&&g.length>0&&(w.url=g[0].url),w)},formatType:function(e,t){return e&&!t?this.getTypeFromFile(e):t&&~t.indexOf(";")?t.substr(0,t.indexOf(";")):t},getTypeFromFile:function(e){e=e.split("?")[0];var t=e.substring(e.lastIndexOf(".")+1).toLowerCase(),n=/(mp4|m4v|ogg|ogv|m3u8|webm|webmv|flv|wmv|mpeg|mov)/gi.test(t)?"video/":"audio/";return this.getTypeFromExtension(t,n)},getTypeFromExtension:function(e,t){switch(t=t||"",e){case"mp4":case"m4v":case"m4a":case"f4v":case"f4a":return t+"mp4";case"flv":return t+"x-flv";case"webm":case"webma":case"webmv":return t+"webm";case"ogg":case"oga":case"ogv":return t+"ogg";case"m3u8":return"application/x-mpegurl";case"ts":return t+"mp2t";default:return t+e}},createErrorMessage:function(e,t,n){var i=e.htmlMediaElement,o=document.createElement("div"),r=t.customError;o.className="me-cannotplay";try{o.style.width=i.width+"px",o.style.height=i.height+"px"}catch(e){}r||(r='<a href="'+e.url+'">',""!==n&&(r+='<img src="'+n+'" width="100%" height="100%" alt="" />'),r+="<span>"+mejs.i18n.t("mejs.download-file")+"</span></a>"),o.innerHTML=r,
i.parentNode.insertBefore(o,i),i.style.display="none",t.error(i)},createPlugin:function(e,t,n,i,o,r){var a,s,l,c=e.htmlMediaElement,u=1,d=1,p="me_"+e.method+"_"+mejs.meIndex++,m=new mejs.PluginMediaElement(p,e.method,e.url),f=document.createElement("div");m.tagName=c.tagName;for(var h=0;h<c.attributes.length;h++){var g=c.attributes[h];g.specified&&m.setAttribute(g.name,g.value)}for(s=c.parentNode;null!==s&&null!=s.tagName&&"body"!==s.tagName.toLowerCase()&&null!=s.parentNode&&null!=s.parentNode.tagName&&null!=s.parentNode.constructor&&"ShadowRoot"===s.parentNode.constructor.name;){if("p"===s.parentNode.tagName.toLowerCase()){s.parentNode.parentNode.insertBefore(s,s.parentNode);break}s=s.parentNode}if(e.isVideo?(u=t.pluginWidth>0?t.pluginWidth:t.videoWidth>0?t.videoWidth:null!==c.getAttribute("width")?c.getAttribute("width"):t.defaultVideoWidth,d=t.pluginHeight>0?t.pluginHeight:t.videoHeight>0?t.videoHeight:null!==c.getAttribute("height")?c.getAttribute("height"):t.defaultVideoHeight,u=mejs.Utility.encodeUrl(u),d=mejs.Utility.encodeUrl(d)):t.enablePluginDebug&&(u=320,d=240),m.success=t.success,f.className="me-plugin",f.id=p+"_container",e.isVideo?c.parentNode.insertBefore(f,c):document.body.insertBefore(f,document.body.childNodes[0]),"flash"===e.method||"silverlight"===e.method){var w="audio/mp4"===c.getAttribute("type"),v=c.getElementsByTagName("source");if(v&&!w)for(var h=0,y=v.length;y>h;h++)"audio/mp4"===v[h].getAttribute("type")&&(w=!0);l=["id="+p,"isvideo="+(e.isVideo||w?"true":"false"),"autoplay="+(i?"true":"false"),"preload="+o,"width="+u,"startvolume="+t.startVolume,"timerrate="+t.timerRate,"flashstreamer="+t.flashStreamer,"height="+d,"pseudostreamstart="+t.pseudoStreamingStartQueryParam],null!==e.url&&("flash"==e.method?l.push("file="+mejs.Utility.encodeUrl(e.url)):l.push("file="+e.url)),t.enablePluginDebug&&l.push("debug=true"),t.enablePluginSmoothing&&l.push("smoothing=true"),t.enablePseudoStreaming&&l.push("pseudostreaming=true"),r&&l.push("controls=true"),t.pluginVars&&(l=l.concat(t.pluginVars)),window[p+"_init"]=function(){switch(m.pluginType){case"flash":m.pluginElement=m.pluginApi=document.getElementById(p);break;case"silverlight":m.pluginElement=document.getElementById(m.id),m.pluginApi=m.pluginElement.Content.MediaElementJS}null!=m.pluginApi&&m.success&&m.success(m,c)},window[p+"_event"]=function(e,t){var n,i,o;n={type:e,target:m};for(i in t)m[i]=t[i],n[i]=t[i];o=t.bufferedTime||0,n.target.buffered=n.buffered={start:function(){return 0},end:function(){return o},length:1},m.dispatchEvent(n)}}switch(e.method){case"silverlight":f.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+p+'" name="'+p+'" width="'+u+'" height="'+d+'" class="mejs-shim"><param name="initParams" value="'+l.join(",")+'" /><param name="windowless" value="true" /><param name="background" value="black" /><param name="minRuntimeVersion" value="3.0.0.0" /><param name="autoUpgrade" value="true" /><param name="source" value="'+t.pluginPath+t.silverlightName+'" /></object>';break;case"flash":mejs.MediaFeatures.isIE?(a=document.createElement("div"),f.appendChild(a),a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+p+'" width="'+u+'" height="'+d+'" class="mejs-shim"><param name="movie" value="'+t.pluginPath+t.flashName+"?"+(new Date).getTime()+'" /><param name="flashvars" value="'+l.join("&amp;")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="'+t.flashScriptAccess+'" /><param name="allowFullScreen" value="true" /><param name="scale" value="default" /></object>'):f.innerHTML='<embed id="'+p+'" name="'+p+'" play="true" loop="false" quality="high" bgcolor="#000000" wmode="transparent" allowScriptAccess="'+t.flashScriptAccess+'" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" src="'+t.pluginPath+t.flashName+'" flashvars="'+l.join("&")+'" width="'+u+'" height="'+d+'" scale="default"class="mejs-shim"></embed>';break;case"youtube":var b;if(-1!=e.url.lastIndexOf("youtu.be"))b=e.url.substr(e.url.lastIndexOf("/")+1),-1!=b.indexOf("?")&&(b=b.substr(0,b.indexOf("?")));else{var k=e.url.match(/[?&]v=([^&#]+)|&|#|$/);k&&(b=k[1])}youtubeSettings={container:f,containerId:f.id,pluginMediaElement:m,pluginId:p,videoId:b,height:d,width:u,scheme:e.scheme,variables:t.youtubeIframeVars},window.postMessage?mejs.YouTubeApi.enqueueIframe(youtubeSettings):mejs.PluginDetector.hasPluginVersion("flash",[10,0,0])&&mejs.YouTubeApi.createFlash(youtubeSettings,t);break;case"vimeo":var x=p+"_player";if(m.vimeoid=e.url.substr(e.url.lastIndexOf("/")+1),f.innerHTML='<iframe src="'+e.scheme+"player.vimeo.com/video/"+m.vimeoid+"?api=1&portrait=0&byline=0&title=0&player_id="+x+'" width="'+u+'" height="'+d+'" frameborder="0" class="mejs-shim" id="'+x+'" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>',"function"==typeof $f){var $=$f(f.childNodes[0]),S=-1;$.addEvent("ready",function(){function e(e,t,n,i){var o={type:n,target:t};"timeupdate"==n&&(t.currentTime=o.currentTime=i.seconds,t.duration=o.duration=i.duration),t.dispatchEvent(o)}$.playVideo=function(){$.api("play")},$.stopVideo=function(){$.api("unload")},$.pauseVideo=function(){$.api("pause")},$.seekTo=function(e){$.api("seekTo",e)},$.setVolume=function(e){$.api("setVolume",e)},$.setMuted=function(e){e?($.lastVolume=$.api("getVolume"),$.api("setVolume",0)):($.api("setVolume",$.lastVolume),delete $.lastVolume)},$.getPlayerState=function(){return S},$.addEvent("play",function(){S=1,e($,m,"play"),e($,m,"playing")}),$.addEvent("pause",function(){S=2,e($,m,"pause")}),$.addEvent("finish",function(){S=0,e($,m,"ended")}),$.addEvent("playProgress",function(t){e($,m,"timeupdate",t)}),$.addEvent("seek",function(t){S=3,e($,m,"seeked",t)}),$.addEvent("loadProgress",function(t){S=3,e($,m,"progress",t)}),m.pluginElement=f,m.pluginApi=$,m.success(m,m.pluginElement)})}else console.warn("You need to include froogaloop for vimeo to work")}return c.style.display="none",c.removeAttribute("autoplay"),m},updateNative:function(e,t){var n,i=e.htmlMediaElement;for(n in mejs.HtmlMediaElement)i[n]=mejs.HtmlMediaElement[n];return t.success(i,i),i}},mejs.YouTubeApi={isIframeStarted:!1,isIframeLoaded:!1,loadIframeApi:function(e){if(!this.isIframeStarted){var t=document.createElement("script");t.src=e.scheme+"www.youtube.com/player_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),this.isIframeStarted=!0}},iframeQueue:[],enqueueIframe:function(e){this.isLoaded?this.createIframe(e):(this.loadIframeApi(e),this.iframeQueue.push(e))},createIframe:function(e){var t=e.pluginMediaElement,n={controls:0,wmode:"transparent"},i=new YT.Player(e.containerId,{height:e.height,width:e.width,videoId:e.videoId,playerVars:mejs.$.extend({},n,e.variables),events:{onReady:function(){i.setVideoSize=function(e,t){i.setSize(e,t)},e.pluginMediaElement.pluginApi=i,e.pluginMediaElement.pluginElement=document.getElementById(e.containerId),t.success(t,t.pluginElement),mejs.YouTubeApi.createEvent(i,t,"canplay"),setInterval(function(){mejs.YouTubeApi.createEvent(i,t,"timeupdate")},250),"undefined"!=typeof t.attributes.autoplay&&i.playVideo()},onStateChange:function(e){mejs.YouTubeApi.handleStateChange(e.data,i,t)}}})},createEvent:function(e,t,n){var i={type:n,target:t};if(e&&e.getDuration){t.currentTime=i.currentTime=e.getCurrentTime(),t.duration=i.duration=e.getDuration(),i.paused=t.paused,i.ended=t.ended,i.muted=e.isMuted(),i.volume=e.getVolume()/100,i.bytesTotal=e.getVideoBytesTotal(),i.bufferedBytes=e.getVideoBytesLoaded();var o=i.bufferedBytes/i.bytesTotal*i.duration;i.target.buffered=i.buffered={start:function(){return 0},end:function(){return o},length:1}}t.dispatchEvent(i)},iFrameReady:function(){for(this.isLoaded=!0,this.isIframeLoaded=!0;this.iframeQueue.length>0;){var e=this.iframeQueue.pop();this.createIframe(e)}},flashPlayers:{},createFlash:function(e){this.flashPlayers[e.pluginId]=e;var t,n=e.scheme+"www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid="+e.pluginId+"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0";mejs.MediaFeatures.isIE?(t=document.createElement("div"),e.container.appendChild(t),t.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+e.scheme+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+e.pluginId+'" width="'+e.width+'" height="'+e.height+'" class="mejs-shim"><param name="movie" value="'+n+'" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="'+options.flashScriptAccess+'" /><param name="allowFullScreen" value="true" /></object>'):e.container.innerHTML='<object type="application/x-shockwave-flash" id="'+e.pluginId+'" data="'+n+'" width="'+e.width+'" height="'+e.height+'" style="visibility: visible; " class="mejs-shim"><param name="allowScriptAccess" value="'+options.flashScriptAccess+'"><param name="wmode" value="transparent"></object>'},flashReady:function(e){var t=this.flashPlayers[e],n=document.getElementById(e),i=t.pluginMediaElement;i.pluginApi=i.pluginElement=n,t.success(i,i.pluginElement),n.cueVideoById(t.videoId);var o=t.containerId+"_callback";window[o]=function(e){mejs.YouTubeApi.handleStateChange(e,n,i)},n.addEventListener("onStateChange",o),setInterval(function(){mejs.YouTubeApi.createEvent(n,i,"timeupdate")},250),mejs.YouTubeApi.createEvent(n,i,"canplay")},handleStateChange:function(e,t,n){switch(e){case-1:n.paused=!0,n.ended=!0,mejs.YouTubeApi.createEvent(t,n,"loadedmetadata");break;case 0:n.paused=!1,n.ended=!0,mejs.YouTubeApi.createEvent(t,n,"ended");break;case 1:n.paused=!1,n.ended=!1,mejs.YouTubeApi.createEvent(t,n,"play"),mejs.YouTubeApi.createEvent(t,n,"playing");break;case 2:n.paused=!0,n.ended=!1,mejs.YouTubeApi.createEvent(t,n,"pause");break;case 3:mejs.YouTubeApi.createEvent(t,n,"progress")}}},window.onYouTubePlayerAPIReady=function(){mejs.YouTubeApi.iFrameReady()},window.onYouTubePlayerReady=function(e){mejs.YouTubeApi.flashReady(e)},window.mejs=mejs,window.MediaElement=mejs.MediaElement,function(e,t,n){var i={"default":"en",locale:{language:n.i18n&&n.i18n.locale.language||"",strings:n.i18n&&n.i18n.locale.strings||{}},pluralForms:[function(){return arguments[1]},function(){var e=arguments;return 1===e[0]?e[1]:e[2]},function(){var e=arguments;return[0,1].indexOf(e[0])>-1?e[1]:e[2]},function(){var e=arguments;return e[0]%10==1&&e[0]%100!=11?e[1]:0!==e[0]?e[2]:e[3]},function(){var e=arguments;return 1===e[0]||11===e[0]?e[1]:2===e[0]||12===e[0]?e[2]:e[0]>2&&e[0]<20?e[3]:e[4]},function(){return 1===args[0]?args[1]:0===args[0]||args[0]%100>0&&args[0]%100<20?args[2]:args[3]},function(){var e=arguments;return e[0]%10==1&&e[0]%100!=11?e[1]:e[0]%10>=2&&(e[0]%100<10||e[0]%100>=20)?e[2]:[3]},function(){var e=arguments;return e[0]%10==1&&e[0]%100!=11?e[1]:e[0]%10>=2&&e[0]%10<=4&&(e[0]%100<10||e[0]%100>=20)?e[2]:e[3]},function(){var e=arguments;return 1===e[0]?e[1]:e[0]>=2&&e[0]<=4?e[2]:e[3]},function(){var e=arguments;return 1===e[0]?e[1]:e[0]%10>=2&&e[0]%10<=4&&(e[0]%100<10||e[0]%100>=20)?e[2]:e[3]},function(){var e=arguments;return e[0]%100==1?e[2]:e[0]%100==2?e[3]:e[0]%100==3||e[0]%100==4?e[4]:e[1]},function(){var e=arguments;return 1===e[0]?e[1]:2===e[0]?e[2]:e[0]>2&&e[0]<7?e[3]:e[0]>6&&e[0]<11?e[4]:e[5]},function(){var e=arguments;return 0===e[0]?e[1]:1===e[0]?e[2]:2===e[0]?e[3]:e[0]%100>=3&&e[0]%100<=10?e[4]:e[0]%100>=11?e[5]:e[6]},function(){var e=arguments;return 1===e[0]?e[1]:0===e[0]||e[0]%100>1&&e[0]%100<11?e[2]:e[0]%100>10&&e[0]%100<20?e[3]:e[4]},function(){var e=arguments;return e[0]%10==1?e[1]:e[0]%10==2?e[2]:e[3]},function(){var e=arguments;return 11!==e[0]&&e[0]%10==1?e[1]:e[2]},function(){var e=arguments;return 1===e[0]?e[1]:e[0]%10>=2&&e[0]%10<=4&&(e[0]%100<10||e[0]%100>=20)?e[2]:e[3]},function(){var e=arguments;return 1===e[0]?e[1]:2===e[0]?e[2]:8!==e[0]&&11!==e[0]?e[3]:e[4]},function(){var e=arguments;return 0===e[0]?e[1]:e[2]},function(){var e=arguments;return 1===e[0]?e[1]:2===e[0]?e[2]:3===e[0]?e[3]:e[4]},function(){var e=arguments;return 0===e[0]?e[1]:1===e[0]?e[2]:e[3]}],getLanguage:function(){var e=i.locale.language||i["default"];return/^(x\-)?[a-z]{2,}(\-\w{2,})?(\-\w{2,})?$/.exec(e)?e:i["default"]},t:function(e,t){if("string"==typeof e&&e.length){var n,o,r=i.getLanguage(),a=function(e,t,n){return"object"!=typeof e||"number"!=typeof t||"number"!=typeof n?e:"string"==typeof e?e:i.pluralForms[n].apply(null,[t].concat(e))},s=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};return e.replace(/[&<>"]/g,function(e){return t[e]})};return i.locale.strings&&i.locale.strings[r]&&(n=i.locale.strings[r][e],"number"==typeof t&&(o=i.locale.strings[r]["mejs.plural-form"],n=a.apply(null,[n,t,o]))),!n&&i.locale.strings&&i.locale.strings[i["default"]]&&(n=i.locale.strings[i["default"]][e],"number"==typeof t&&(o=i.locale.strings[i["default"]]["mejs.plural-form"],n=a.apply(null,[n,t,o]))),n=n||e,"number"==typeof t&&(n=n.replace("%1",t)),s(n)}return e}};"undefined"!=typeof mejsL10n&&(i.locale.language=mejsL10n.language),n.i18n=i}(document,window,mejs),function(e){"use strict";"undefined"!=typeof mejsL10n&&(e[mejsL10n.language]=mejsL10n.strings)}(mejs.i18n.locale.strings),function(e){"use strict";void 0===e.en&&(e.en={"mejs.plural-form":1,"mejs.download-file":"Download File","mejs.fullscreen-off":"Turn off Fullscreen","mejs.fullscreen-on":"Go Fullscreen","mejs.download-video":"Download Video","mejs.fullscreen":"Fullscreen","mejs.time-jump-forward":["Jump forward 1 second","Jump forward %1 seconds"],"mejs.play":"Play","mejs.pause":"Pause","mejs.close":"Close","mejs.time-slider":"Time Slider","mejs.time-help-text":"Use Left/Right Arrow keys to advance one second, Up/Down arrows to advance ten seconds.","mejs.time-skip-back":["Skip back 1 second","Skip back %1 seconds"],"mejs.captions-subtitles":"Captions/Subtitles","mejs.none":"None","mejs.mute-toggle":"Mute Toggle","mejs.volume-help-text":"Use Up/Down Arrow keys to increase or decrease volume.","mejs.unmute":"Unmute","mejs.mute":"Mute","mejs.volume-slider":"Volume Slider","mejs.video-player":"Video Player","mejs.audio-player":"Audio Player","mejs.ad-skip":"Skip ad","mejs.ad-skip-info":["Skip in 1 second","Skip in %1 seconds"],"mejs.source-chooser":"Source Chooser"})}(mejs.i18n.locale.strings),function(){"use strict";function e(i){if(!i)throw new Error("No options passed to Waypoint constructor");if(!i.element)throw new Error("No element option passed to Waypoint constructor");if(!i.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+t,this.options=e.Adapter.extend({},e.defaults,i),this.element=this.options.element,this.adapter=new e.Adapter(this.element),this.callback=i.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=e.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=e.Context.findOrCreateByElement(this.options.context),e.offsetAliases[this.options.offset]&&(this.options.offset=e.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),n[this.key]=this,t+=1}var t=0,n={};e.prototype.queueTrigger=function(e){this.group.queueTrigger(this,e)},e.prototype.trigger=function(e){this.enabled&&this.callback&&this.callback.apply(this,e)},e.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete n[this.key]},e.prototype.disable=function(){return this.enabled=!1,this},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},e.prototype.next=function(){return this.group.next(this)},e.prototype.previous=function(){return this.group.previous(this)},e.invokeAll=function(e){var t=[];for(var i in n)t.push(n[i]);for(var o=0,r=t.length;r>o;o++)t[o][e]()},e.destroyAll=function(){e.invokeAll("destroy")},e.disableAll=function(){e.invokeAll("disable")},e.enableAll=function(){e.Context.refreshAll();for(var t in n)n[t].enabled=!0;return this},e.refreshAll=function(){e.Context.refreshAll()},e.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},e.viewportWidth=function(){return document.documentElement.clientWidth},e.adapters=[],e.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},e.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=e}(),function(){"use strict";function e(e){window.setTimeout(e,1e3/60)}function t(e){this.element=e,this.Adapter=o.Adapter,this.adapter=new this.Adapter(e),this.key="waypoint-context-"+n,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},e.waypointContextKey=this.key,i[e.waypointContextKey]=this,n+=1,o.windowContext||(o.windowContext=!0,o.windowContext=new t(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var n=0,i={},o=window.Waypoint,r=window.onload;t.prototype.add=function(e){var t=e.options.horizontal?"horizontal":"vertical";this.waypoints[t][e.key]=e,this.refresh()},t.prototype.checkEmpty=function(){var e=this.Adapter.isEmptyObject(this.waypoints.horizontal),t=this.Adapter.isEmptyObject(this.waypoints.vertical),n=this.element==this.element.window;e&&t&&!n&&(this.adapter.off(".waypoints"),delete i[this.key])},t.prototype.createThrottledResizeHandler=function(){function e(){t.handleResize(),t.didResize=!1}var t=this;this.adapter.on("resize.waypoints",function(){t.didResize||(t.didResize=!0,o.requestAnimationFrame(e))})},t.prototype.createThrottledScrollHandler=function(){function e(){t.handleScroll(),t.didScroll=!1}var t=this;this.adapter.on("scroll.waypoints",function(){(!t.didScroll||o.isTouch)&&(t.didScroll=!0,o.requestAnimationFrame(e))})},t.prototype.handleResize=function(){o.Context.refreshAll()},t.prototype.handleScroll=function(){var e={},t={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var n in t){var i=t[n],o=i.newScroll>i.oldScroll,r=o?i.forward:i.backward;for(var a in this.waypoints[n]){var s=this.waypoints[n][a];if(null!==s.triggerPoint){var l=i.oldScroll<s.triggerPoint,c=i.newScroll>=s.triggerPoint,u=l&&c,d=!l&&!c;(u||d)&&(s.queueTrigger(r),e[s.group.id]=s.group)}}}for(var p in e)e[p].flushTriggers();this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.innerHeight=function(){return this.element==this.element.window?o.viewportHeight():this.adapter.innerHeight()},t.prototype.remove=function(e){delete this.waypoints[e.axis][e.key],this.checkEmpty()},t.prototype.innerWidth=function(){return this.element==this.element.window?o.viewportWidth():this.adapter.innerWidth()},t.prototype.destroy=function(){var e=[];for(var t in this.waypoints)for(var n in this.waypoints[t])e.push(this.waypoints[t][n]);for(var i=0,o=e.length;o>i;i++)e[i].destroy()},t.prototype.refresh=function(){var e,t=this.element==this.element.window,n=t?void 0:this.adapter.offset(),i={};this.handleScroll(),e={horizontal:{contextOffset:t?0:n.left,contextScroll:t?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:t?0:n.top,contextScroll:t?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var r in e){var a=e[r];for(var s in this.waypoints[r]){var l,c,u,d,p,m=this.waypoints[r][s],f=m.options.offset,h=m.triggerPoint,g=0,w=null==h;m.element!==m.element.window&&(g=m.adapter.offset()[a.offsetProp]),"function"==typeof f?f=f.apply(m):"string"==typeof f&&(f=parseFloat(f),m.options.offset.indexOf("%")>-1&&(f=Math.ceil(a.contextDimension*f/100))),l=a.contextScroll-a.contextOffset,m.triggerPoint=Math.floor(g+l-f),c=h<a.oldScroll,u=m.triggerPoint>=a.oldScroll,d=c&&u,p=!c&&!u,!w&&d?(m.queueTrigger(a.backward),i[m.group.id]=m.group):!w&&p?(m.queueTrigger(a.forward),i[m.group.id]=m.group):w&&a.oldScroll>=m.triggerPoint&&(m.queueTrigger(a.forward),i[m.group.id]=m.group)}}return o.requestAnimationFrame(function(){for(var e in i)i[e].flushTriggers()}),this},t.findOrCreateByElement=function(e){return t.findByElement(e)||new t(e)},t.refreshAll=function(){for(var e in i)i[e].refresh()},t.findByElement=function(e){return i[e.waypointContextKey]},window.onload=function(){r&&r(),t.refreshAll()},o.requestAnimationFrame=function(t){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||e).call(window,t)},o.Context=t}(),function(){"use strict";function e(e,t){return e.triggerPoint-t.triggerPoint}function t(e,t){return t.triggerPoint-e.triggerPoint}function n(e){this.name=e.name,this.axis=e.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),i[this.axis][this.name]=this}var i={vertical:{},horizontal:{}},o=window.Waypoint;n.prototype.add=function(e){this.waypoints.push(e)},n.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},n.prototype.flushTriggers=function(){for(var n in this.triggerQueues){var i=this.triggerQueues[n],o="up"===n||"left"===n;i.sort(o?t:e);for(var r=0,a=i.length;a>r;r+=1){var s=i[r];(s.options.continuous||r===i.length-1)&&s.trigger([n])}}this.clearTriggerQueues()},n.prototype.next=function(t){this.waypoints.sort(e);var n=o.Adapter.inArray(t,this.waypoints);return n===this.waypoints.length-1?null:this.waypoints[n+1]},n.prototype.previous=function(t){this.waypoints.sort(e);var n=o.Adapter.inArray(t,this.waypoints);return n?this.waypoints[n-1]:null},n.prototype.queueTrigger=function(e,t){this.triggerQueues[t].push(e)},n.prototype.remove=function(e){var t=o.Adapter.inArray(e,this.waypoints);t>-1&&this.waypoints.splice(t,1)},n.prototype.first=function(){return this.waypoints[0]},n.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},n.findOrCreate=function(e){return i[e.axis][e.name]||new n(e)},o.Group=n}(),function(){"use strict";function e(e){this.$element=t(e)}var t=window.jQuery,n=window.Waypoint;t.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(t,n){e.prototype[n]=function(){var e=Array.prototype.slice.call(arguments);return this.$element[n].apply(this.$element,e)}}),t.each(["extend","inArray","isEmptyObject"],function(n,i){e[i]=t[i]}),n.adapters.push({name:"jquery",Adapter:e}),n.Adapter=e}(),function(){"use strict";function e(e){return function(){var n=[],i=arguments[0];return e.isFunction(arguments[0])&&(i=e.extend({},arguments[1]),i.handler=arguments[0]),this.each(function(){var o=e.extend({},i,{element:this});"string"==typeof o.context&&(o.context=e(this).closest(o.context)[0]),n.push(new t(o))}),n}}var t=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=e(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=e(window.Zepto))}(),function(){"use strict";function e(i){this.options=t.extend({},e.defaults,i),this.container=this.options.element,"auto"!==this.options.container&&(this.container=this.options.container),this.$container=t(this.container),this.$more=t(this.options.more),this.$more.length&&(this.setupHandler(),this.waypoint=new n(this.options))}var t=window.jQuery,n=window.Waypoint;e.prototype.setupHandler=function(){this.options.handler=t.proxy(function(){this.options.onBeforePageLoad(),this.destroy(),this.$container.addClass(this.options.loadingClass),t.get(t(this.options.more).attr("href"),t.proxy(function(e){var i=t(t.parseHTML(e)),o=i.find(this.options.more),r=i.find(this.options.items);r.length||(r=i.filter(this.options.items)),this.$container.append(r),this.$container.removeClass(this.options.loadingClass),o.length||(o=i.filter(this.options.more)),o.length?(this.$more.replaceWith(o),this.$more=o,this.waypoint=new n(this.options)):this.$more.remove(),this.options.onAfterPageLoad(r)},this))},this)},e.prototype.destroy=function(){this.waypoint&&this.waypoint.destroy()},e.defaults={container:"auto",items:".infinite-item",more:".infinite-more-link",offset:"bottom-in-view",loadingClass:"infinite-loading",onBeforePageLoad:t.noop,onAfterPageLoad:t.noop},n.Infinite=e}();